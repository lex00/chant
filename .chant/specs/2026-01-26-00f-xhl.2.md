---
type: code
status: pending
depends_on:
- 2026-01-26-00f-xhl.1
target_files:
- src/main.rs
- src/replay.rs
---
# Implement confirmation prompt and dry-run mode

Add the confirmation prompt that shows the diff between original completion and current state, and implement `--dry-run` mode that shows what would happen without executing. This includes displaying original completion date, current date, and a summary of changes.

### Acceptance Criteria

- [ ] Shows original completion date and current date before confirmation
- [ ] Displays summary of what will be re-executed
- [ ] Prompts "Proceed? [y/N]" and waits for user input
- [ ] `--force` flag skips confirmation prompt entirely
- [ ] `--dry-run` shows what would happen and exits without executing

### Edge Cases

- User enters 'n' or anything other than 'y': Should abort gracefully with message
- User interrupts (Ctrl-C) during prompt: Should handle signal and exit cleanly
- Dry-run with other flags: Should show what would happen including branch/PR creation
- Non-interactive terminal: Should fail gracefully if confirmation needed but stdin not available

### Example Test Cases

For this feature, verify:
- Confirmation prompt appears with correct dates and spec info
- Entering 'n' aborts with exit code 1
- `--force` bypasses prompt and continues
- `--dry-run` shows execution plan without modifying anything
- `--dry-run --branch=feature` shows it would create a branch
---
type: code
status: pending
target_files:
- src/main.rs
---

# Save full agent conversation logs

Currently only the agent summary is appended to the spec after work. The full agent output/conversation should be saved to a log file for debugging and audit purposes.

## Acceptance Criteria

- [ ] Create `.chant/logs/` directory when first log is written
- [ ] Save full agent output to `.chant/logs/{spec-id}.log`
- [ ] Add `.chant/logs/` to `.chant/.gitignore` when logs dir is created
- [ ] Spec file continues to show only the summary (current behavior)
- [ ] Log file includes timestamp header
- [ ] Log file is overwritten on replay (or append with separator)

## File Structure

```
.chant/
  logs/
    2026-01-24-001-x7m.log    # Full agent output
    2026-01-24-002-abc.log
  specs/
    2026-01-24-001-x7m.md     # Summary only in ## Agent Output
  .gitignore                  # Contains: logs/
```

## Log File Format

```
# Agent Log: 2026-01-24-001-x7m
# Started: 2026-01-24T15:30:00Z
# Prompt: standard

[Full agent stdout/stderr output here...]
```

## Implementation Notes

- Modify `invoke_agent` to also write to log file
- Create logs dir with `std::fs::create_dir_all`
- Check if .gitignore exists, append `logs/` if not present
- The summary in spec file is still useful for quick review
- Full logs are useful for debugging failed specs or understanding agent reasoning

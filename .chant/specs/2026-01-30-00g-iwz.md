---
type: code
status: pending
labels:
- ide-integration
- enhancement
target_files:
- src/main.rs
---

# Enhance chant status with activity, attention, and output modes

## Problem

Users lack a quick overview of project health. The current `chant status` shows only counts. Users must run multiple commands to understand what needs attention.

## Solution

Enhance existing `chant status` command with:
- Richer default output (activity, attention, queue)
- `--brief` for single-line output (IDE status bars)
- `--json` for machine-readable output (IDE integration)
- `--watch` for live updates (IDE panels)

## Output Modes

### Regular (default)

```
Chant Status
============
  Pending:     10
  In Progress:  3
  Completed:   45
  Failed:       1
  Blocked:      2
  Ready:        8

Today
-----
  +5 completed, +3 started, +2 created

Attention
---------
  ✗ 00a-xyz  Auth migration (failed 2h ago)
  ◌ 00c-def  Waiting on: 00a-xyz

In Progress
-----------
  00g-iwz  Dashboard Command (5m)
  00h-f77  Native Orchestrator (12m)

Ready (8)
---------
  00d-vao  Spec Templates
  00e-y44  Complexity Scoring
  00f-gqz  Cost Tracking
```

### `--brief`

Single line for status bars and scripts:
```
chant: 45 done, 3 running, 8 ready, 1 failed
```

### `--json`

Full data as JSON for IDE parsing:
```json
{
  "counts": {"pending": 10, "in_progress": 3, "completed": 45, "failed": 1, "blocked": 2, "ready": 8},
  "today": {"completed": 5, "started": 3, "created": 2},
  "attention": [{"id": "00a-xyz", "title": "Auth migration", "reason": "failed", "ago": "2h"}],
  "in_progress": [{"id": "00g-iwz", "title": "Dashboard Command", "elapsed_mins": 5}],
  "ready": [{"id": "00d-vao", "title": "Spec Templates"}]
}
```

### `--watch`

Refresh output every 5 seconds. Clears screen between updates. Works with all output modes.

## Acceptance Criteria

- [ ] Regular output shows: counts, today's activity, attention, in-progress, ready queue
- [ ] `--brief` outputs single line summary
- [ ] `--json` outputs structured JSON with all sections
- [ ] `--watch` refreshes every 5s (works with --brief and --json)
- [ ] Attention section shows failed and blocked specs
- [ ] In-progress shows elapsed time since status changed
- [ ] Ready queue limited to first 5 (with count indicator)
- [ ] Unit tests for status data aggregation

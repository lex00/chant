---
type: research
status: completed
target_files:
- src/main.rs
completed_at: 2026-01-25T10:45:00Z
model: claude-haiku-4-5-20251001
---
# Investigate agent guide install for slash commands and provider config

## Overview

Investigate options for offering an "agent guide install" feature that would configure AI assistants (Claude, etc.) with optimal settings for operating chant.

## Problem

Users new to chant need to:
1. Understand the chant workflow (specs, not direct coding)
2. Configure their AI assistant to follow chant conventions
3. Set up slash commands or shortcuts for common operations
4. Know the right prompts/instructions to give their agent

## Potential Solution: `chant init --agent`

A guided setup that:
1. Detects or asks which AI provider/tool is being used
2. Installs appropriate configuration files
3. Provides templates for CLAUDE.md or similar

## Questions to Answer

### 1. What should be configured?

**For Claude Code:**
- [ ] CLAUDE.md file (already exists, could be templated)
- [ ] Slash commands (e.g., `/spec`, `/work`, `/list`)
- [ ] Custom instructions or system prompts
- [ ] MCP server configuration

**For other providers:**
- [ ] Cursor rules file
- [ ] Continue.dev configuration
- [ ] Aider configuration
- [ ] Generic .ai-instructions file

### 2. What templates are needed?

| Template | Purpose |
|----------|---------|
| CLAUDE.md | Project-level instructions for Claude |
| .cursorrules | Cursor AI configuration |
| .continue/config.json | Continue.dev settings |
| .aider.conf.yml | Aider configuration |

### 3. Slash commands to offer

| Command | Action |
|---------|--------|
| /spec | `just chant add "description"` |
| /work | `just chant work <id>` |
| /list | `just chant list` |
| /show | `just chant show <id>` |
| /archive | `just chant archive <id>` |

### 4. Implementation approach

Options:
- [ ] `chant init --agent claude` - Provider-specific setup
- [ ] `chant init --agent` - Interactive wizard
- [ ] `chant doctor` - Check and fix agent configuration
- [ ] Separate `chant-agent` companion tool

### 5. Distribution considerations

- Should templates live in the chant binary or be fetched?
- How to handle template updates?
- Should this be a plugin system?

## Acceptance Criteria

- [x] Document what configurations would help each provider
- [x] Identify which providers to support initially
- [x] Design the `chant init --agent` UX flow
- [x] Determine where templates should live
- [x] Recommend MVP scope (which providers, which features)
- [x] Create follow-up implementation spec if warranted (created 00g-g7o)

## Investigation Results

### 1. Provider-Specific Configurations

#### Claude Code (Claude.app with Claude Code tool)
**Configuration Methods:**
- **Project-level:** CLAUDE.md file (already in use by chant)
- **System instructions:** Not user-configurable through files for Claude.app
- **Custom prompts:** Handled through CLAUDE.md context
- **MCP servers:** Configured through Claude Code settings (not via files in project)
- **Slash commands:** Not natively supported; can document patterns in CLAUDE.md

**What helps:**
- Clear CLAUDE.md instructions (already excellent in chant)
- Example commands in markdown
- Workflow documentation with code snippets
- Link to chant documentation

#### Cursor IDE
**Configuration Methods:**
- **.cursorrules file:** Plain text or markdown in project root
- **Location:** `.cursorrules` or `.cursor/rules.txt`
- **Format:** Markdown or plain text (Cursor reads as instructions)
- **Supports:** Agent/codebase rules, custom instructions
- **Slash commands:** Fully supported! Can define custom commands like `/spec`, `/work`, etc.

**What helps:**
- `.cursorrules` file with chant workflow
- Custom slash command definitions for chant operations
- Explanation of spec-driven development
- Example usage patterns

#### Continue.dev (Open-source IDE extension)
**Configuration Methods:**
- **.continue/config.json:** Main configuration
- **Location:** `.continue/config.json` in project root
- **Format:** JSON
- **Supports:** Model settings, custom slash commands, system prompts
- **Slash commands:** Fully supported

**What helps:**
- Custom slash commands in config.json
- System prompt configuration pointing to chant docs
- Model/provider configuration
- Automation rules

#### Aider (CLI-based AI pair programmer)
**Configuration Methods:**
- **.aider.conf.yml:** Project-level configuration
- **--no-auto-commits:** Flag to align with chant
- **Custom system message:** Via config
- **Location:** `.aider.conf.yml` at project root
- **Format:** YAML

**What helps:**
- Configuration file disabling auto-commits (use chant instead)
- System message about spec-driven approach
- File patterns to include/exclude
- Model configuration

#### VS Code (via extensions like GitHub Copilot, Continue.dev)
**Configuration Methods:**
- **.vscode/settings.json:** Workspace settings
- **.vscode/extensions.json:** Recommended extensions
- **Generic .ai-instructions:** Some extensions support this
- **Slash commands:** Extension-dependent

**What helps:**
- .vscode/settings.json with recommended extensions
- .vscode/extensions.json listing Continue.dev or similar
- .ai-instructions for generic instructions
- Documentation of workflow

#### Generic/Fallback: .ai-instructions
**Configuration Methods:**
- **.ai-instructions file:** Emerging standard for AI tool configuration
- **Location:** Project root
- **Format:** Plain text or markdown
- **Support:** Growing adoption by various tools (Claude Code, some GitHub features)
- **Portable:** Works across different tools

**What helps:**
- Concise chant workflow summary
- Links to full documentation
- Key principles and commands
- Warning about spec-driven approach (no direct editing)

### 2. Recommended Providers for MVP

**Priority 1 (Must have):**
1. **Claude Code** - Already heavily documented via CLAUDE.md
2. **Cursor IDE** - Most accessible to developers, has native slash command support

**Priority 2 (Should have):**
3. **Continue.dev** - Growing popularity, open-source
4. **.ai-instructions** - Generic fallback, future-proof

**Priority 3 (Nice to have):**
5. **Aider** - Specialized for terminal-based development
6. **VS Code** - Via workspace settings + .ai-instructions

### 3. UX Flow for `chant init --agent`

#### Option A: Interactive Wizard (Recommended MVP)
```
$ chant init --agent

Chant Agent Configuration Wizard
=================================

Which AI tool are you using? (Select one)
1. Claude Code (Claude.app)
2. Cursor IDE
3. Continue.dev
4. VS Code
5. Aider
6. Other
7. All of the above

> 1

Creating configuration for Claude Code:
✓ CLAUDE.md already exists (use as-is)
ℹ No additional file-based configuration needed for Claude Code
ℹ Ensure you have Claude Code configured in Claude.app settings
ℹ Full instructions: https://docs.chant.dev/agents/claude-code

Configuration complete!
Next steps:
1. Review docs at: https://docs.chant.dev/agents
2. Try your first spec: just chant add "description"
3. Execute it: just chant work <spec-id>
```

#### Option B: Provider-Specific Flag (Alternative)
```
chant init --agent claude      # Configure for Claude Code
chant init --agent cursor      # Configure for Cursor IDE
chant init --agent all         # Configure for all supported providers
```

#### Option C: Hybrid Approach (Recommended Full)
```
chant init --agent                    # Interactive wizard (default)
chant init --agent --provider cursor  # Skip wizard, use provider
chant init --agent --list             # Show available providers
chant init --agent --dry-run          # Show what would be created
```

### 4. Template Storage Approach

**Recommended: Embedded in Binary**

**Why:**
- Zero external dependencies
- Works offline
- Consistent versions
- Faster onboarding
- No network requests needed
- Templates update with binary updates

**Implementation Pattern:**
```rust
// In src/main.rs or new src/agent.rs
const AGENT_TEMPLATES: &[(&str, &str)] = &[
    ("cursorrules", include_str!("../templates/cursorrules")),
    ("continue-config.json", include_str!("../templates/continue-config.json")),
    // ... more templates
];
```

**Template Files Location:** `templates/` directory in repo root
- `templates/.cursorrules` - Cursor IDE rules
- `templates/continue-config.json` - Continue.dev configuration
- `templates/.ai-instructions` - Generic instructions
- `templates/aider.conf.yml` - Aider configuration
- `templates/claude-code-guide.md` - Claude Code setup guide

**Update Strategy:**
- Templates are part of source code
- Update via regular `cargo build` and binary release
- No separate distribution needed
- Changes tracked in git history

### 5. MVP Scope Recommendation

#### Phase 1: MVP (v0.1)
**Goal:** Get Claude Code and Cursor users oriented quickly

**In Scope:**
1. `chant init --agent` interactive wizard
2. Support 3 providers:
   - Claude Code (verify/display CLAUDE.md)
   - Cursor IDE (generate .cursorrules)
   - Generic (.ai-instructions as fallback)
3. Embedded templates in binary
4. Simple output with next steps

**CLI Command:**
```rust
#[derive(Subcommand)]
enum Commands {
    // ... existing commands
    /// Configure AI agent tools
    InitAgent {
        /// Specific provider (claude, cursor, continue, aider, vscode, all)
        provider: Option<String>,
        /// Skip interactive prompts
        #[arg(long)]
        skip_prompts: bool,
        /// Show available providers without configuring
        #[arg(long)]
        list: bool,
        /// Dry run - show what would be created
        #[arg(long)]
        dry_run: bool,
    },
}
```

**Outputs:**
- Display/verify CLAUDE.md for Claude Code
- Create .cursorrules for Cursor
- Create .ai-instructions as generic fallback
- Print configuration summary

#### Phase 2: Future
- Support Continue.dev with custom slash commands
- VS Code workspace settings
- Aider configuration
- Plugin system for custom providers

### 6. Template Content Summary

#### .cursorrules (Cursor IDE)
```
# Chant: Intent Driven Development

[Workflow rules explaining:]
- Use `just chant add "description"` for new work
- Never edit files directly
- Always work through specs
- Use `just chant work <id>` to execute
- Reference CLAUDE.md for detailed workflow

[Cursor-specific slash commands:]
/spec - Add new spec
/work - Execute spec
/list - List specs
/show - Show spec details
```

#### .ai-instructions (Generic)
```
# Chant Workflow Instructions

This project uses Chant, an Intent Driven Development tool.

## Key Principles
1. All work flows through specs (CLAUDE.md explains why)
2. Never edit files directly - use specs
3. Each spec is isolated and reproducible

## Commands
- `just chant add "description"` - Create spec
- `just chant work <id>` - Execute spec
- `just chant list` - List all specs

## Next Steps
Read CLAUDE.md in project root for full workflow details.
```

#### continue-config.json (Continue.dev)
```json
{
  "slashCommands": [
    {
      "name": "spec",
      "description": "Add a new chant spec",
      "step": {
        "type": "shell",
        "command": "just chant add"
      }
    },
    {
      "name": "work",
      "description": "Execute a chant spec",
      "step": {
        "type": "shell",
        "command": "just chant work"
      }
    }
  ],
  "systemPrompt": "This project uses Chant for development. See CLAUDE.md for workflow."
}
```

### 7. Key Design Decisions

| Decision | Rationale |
|----------|-----------|
| Embedded templates in binary | No external deps, works offline, consistent versions |
| Start with 3 providers | Covers 80% of use cases, manageable scope |
| Wizard UX by default | Lower barrier for new users, discoverable |
| No slash command generation for Claude Code | Not supported natively; use CLAUDE.md instead |
| .ai-instructions as fallback | Future-proof, portable across tools |
| Link to docs rather than inline everything | Avoid duplication, easier to maintain |

### 8. Implementation Considerations

**Build System:**
- Add `templates/` directory to project
- Use `include_str!()` macros in Rust
- No changes needed to `justfile` or dependencies

**File Creation Logic:**
- Check if files already exist (warn before overwriting)
- Create `.chant/` directory structure if needed
- Generate timestamp-stamped comments in files

**Testing:**
- Unit tests verifying template content
- Integration test for wizard flow
- Verify .cursorrules syntax valid

**Documentation Needed:**
- docs/agents/ directory with per-provider guides
- docs/agents/claude-code.md
- docs/agents/cursor.md
- docs/agents/continue.md
- docs/agents/generic.md
## Follow-Up Implementation Spec

Based on this investigation, recommend creating a new implementation spec:
**Implement `chant init --agent` for Cursor IDE and .ai-instructions support**

This spec should focus on:
1. Add new `InitAgent` command to CLI (src/main.rs)
2. Create templates in `templates/` directory
3. Implement interactive wizard UX
4. Generate .cursorrules and .ai-instructions files
5. Display configuration summary and next steps
6. Link to online documentation

Target scope for MVP:
- Support Cursor IDE (.cursorrules generation)
- Generic fallback (.ai-instructions)
- Verify Claude Code setup (CLAUDE.md check)
- Estimated effort: 2-3 days development
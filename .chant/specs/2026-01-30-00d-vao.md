---
type: code
status: in_progress
labels:
- cursor-integration
- enhancement
target_files:
- src/spec_template.rs
- src/cmd/template.rs
- src/cmd/mod.rs
- src/main.rs
- src/lib.rs
model: claude-opus-4-5-20251101
---
# Spec Templates - Add template system for creating specs from reusable templates

## Problem

Users frequently create similar specs for common tasks (authentication, testing, refactoring, etc.). Currently they must write each spec from scratch, which is repetitive and error-prone. A template system would let users define reusable patterns with variables.

## Solution

Add a template system with three components:

1. **Template storage**: Templates stored in `.chant/templates/` (project) or `~/.config/chant/templates/` (global)
2. **Template commands**: `chant template list|show|create` for managing templates
3. **Template usage**: `chant add --template <name>` to create spec from template

Templates are markdown files with YAML frontmatter and `{{variable}}` placeholders.

## Template Format

```markdown
---
name: add-feature
description: Add a new feature with tests
variables:
  - name: feature_name
    description: Name of the feature
    required: true
  - name: module
    description: Target module
    default: core
type: code
labels:
  - feature
---

# Add {{feature_name}} feature

## Problem

The {{module}} module needs {{feature_name}} functionality.

## Solution

Implement {{feature_name}} in the {{module}} module with full test coverage.

## Acceptance Criteria

- [ ] {{feature_name}} implemented in `src/{{module}}/`
- [ ] Unit tests added
- [ ] Integration tests added
- [ ] Documentation updated
```

## Commands

### `chant template list`
Lists available templates from both project and global directories.

### `chant template show <name>`
Shows template content and variable definitions.

### `chant template create <name>`
Interactive wizard to create a new template.

### `chant add --template <name> [--var key=value...]`
Creates a spec from template, prompting for missing required variables.

## Acceptance Criteria

- [x] Template struct defined with name, description, variables, and content
- [x] Template loading from `.chant/templates/` and `~/.config/chant/templates/`
- [x] `chant template list` command shows available templates
- [x] `chant template show <name>` displays template content and variables
- [x] `chant add --template <name>` creates spec from template
- [x] Variable substitution with `{{variable}}` syntax
- [x] Interactive prompt for missing required variables (TTY only)
- [x] `--var key=value` flag for non-interactive variable passing
- [x] Default values used when variable not provided
- [x] Project templates override global templates with same name
- [x] Error handling for missing templates, missing required variables
- [x] Unit tests for template parsing and variable substitution
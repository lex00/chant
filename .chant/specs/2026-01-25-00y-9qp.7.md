---
type: code
status: pending
depends_on:
- 2026-01-25-00y-9qp.6
target_files:
- src/merge.rs
- src/spec_group.rs
- src/spec.rs
---
# Deduplicate merge.rs

Remove duplicate functions from merge.rs that now exist in spec_group.rs or spec.rs. Clean up and reduce merge.rs to under 700 lines.

### Acceptance Criteria

- [ ] Remove `is_member_of()` from merge.rs (use spec_group::is_member_of via import)
- [ ] Remove any duplicate sequence extraction functions
- [ ] Remove any other duplicated logic between merge.rs and spec.rs/spec_group.rs
- [ ] All imports updated to reference spec_group for group-related logic
- [ ] `merge.rs` is now under 700 lines
- [ ] Merge functionality works identically (no behavior changes)
- [ ] `just check` passes
- [ ] No clippy warnings about unused code

### Edge Cases

- **Import paths**: Ensure all imports from spec_group use correct module paths
- **Visibility levels**: Verify functions needed by merge.rs are public in spec_group
- **Re-export chains**: Check that library properly re-exports spec_group functions if merge.rs needs them
- **No logic changes**: Confirm merge behavior is preserved despite consolidation

### Example Test Cases

For deduplication, verify:
- Merge operations still work correctly
- No duplicate is_member_of() definitions exist in the codebase
- Calling spec_group functions from merge.rs works correctly
- Build has no "unused function" warnings
- All merge tests still pass


This sequence ensures:
- ✅ **Parallelizable**: Members 2-5 (cmd module extractions) can potentially run in parallel once Member 1 is complete
- ✅ **Compilable at each step**: Each member leaves code in a working, testable state
- ✅ **Minimal dependencies**: Members ordered to respect data flow and avoid circular dependencies
- ✅ **Testable**: Each member has clear acceptance criteria and example test cases
- ✅ **Documented**: Detailed edge cases and test scenarios help Haiku understand requirements thoroughly
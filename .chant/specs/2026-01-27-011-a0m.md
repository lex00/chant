---
type: code
status: pending
target_files:
  - src/cmd/work.rs
  - src/main.rs
---

# Add --force flag to chant work to override dependency checks

## Problem

When dependency tracking has a bug or false positive, users have no way to work on a "blocked" spec even if they know the dependencies are actually satisfied.

**User Request:** "Force work on the blocked specs (if dependencies are truly satisfied): `chant work 2026-01-27-00t-bfs --force`"

**Use Cases:**
1. **Dependency tracking bug:** Spec shows as blocked but dependencies are actually completed
2. **Manual override:** User verified dependencies are satisfied despite status
3. **Emergency work:** Need to proceed despite dependency chain issues
4. **Testing:** Want to work on spec to test dependency resolution

## Solution

Add `--force` flag to `chant work` command:

```rust
// In src/main.rs
#[derive(Parser)]
struct WorkArgs {
    spec_id: Option<String>,
    #[arg(long)]
    parallel: bool,
    #[arg(long)]
    force: bool,  // NEW: Skip dependency checks
    // ... other flags
}

// In src/cmd/work.rs
pub fn cmd_work(
    spec_id: &str,
    force: bool,
    config: &Config,
) -> Result<()> {
    let spec = resolve_spec(spec_id)?;

    // Check if ready (unless --force)
    if !force {
        let all_specs = load_all_specs()?;
        if !spec.is_ready(&all_specs) {
            let blockers = spec.get_blocking_dependencies(&all_specs);
            bail!(
                "Spec {} is blocked by: {}\n\nUse --force to override dependency checks",
                spec.id,
                blockers.join(", ")
            );
        }
    } else {
        eprintln!("⚠️  Warning: Forcing work on spec (skipping dependency checks)");
    }

    // ... proceed with work
}
```

**Safety Considerations:**
- Print warning when --force is used
- Don't skip other checks (just dependency blocking)
- Log forced executions for audit trail

## Acceptance Criteria

- [ ] Add --force flag to WorkArgs in main.rs
- [ ] Pass force flag through to cmd_work
- [ ] Skip is_ready() check when --force is true
- [ ] Print warning message when --force is used
- [ ] Show which dependencies are being skipped in warning
- [ ] Still perform other validations (spec exists, valid config, etc.)
- [ ] Add to help text: `chant work --help` shows --force option
- [ ] Add integration test: blocked spec + --force = executes anyway
- [ ] Add integration test: --force warning message appears
- [ ] Update documentation with --force usage and risks
- [ ] All existing tests pass
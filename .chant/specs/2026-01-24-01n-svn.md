---
type: code
status: completed
model: claude-opus-4-5-20251101
---
# Configurable prompts system

## Problem

Currently chant has prompts in two places:
1. `.chant/prompts/standard.md` - loaded from file, used for `work` command
2. `assemble_split_prompt()` in main.rs - hardcoded, used for `split` command

All prompts should be:
1. Stored in `.chant/prompts/` as markdown files
2. Configurable/customizable by the user
3. Loaded at runtime with sensible defaults

## Current State

- `standard.md` exists and is loaded via `prompt::load_prompt()`
- Split prompt is hardcoded in `main.rs:1704-1752`
- No other prompts exist yet

## Goals

### 1. Move split prompt to markdown file

Create `.chant/prompts/split.md` with the current split prompt content, enhanced with requirements for thorough acceptance criteria.

### 2. Enhance split prompt for Haiku-executable specs

The split prompt should require:
- Explicit acceptance criteria with checkboxes for each subtask
- Edge cases called out explicitly
- Example test cases where applicable
- Clear "done" conditions that Haiku can verify

The goal: a strong model (Opus/Sonnet) does the split and thinks through edge cases, then Haiku can execute each subtask with a simple prompt because all the thinking is already done.

### 3. Unified prompt loading

All prompts loaded from `.chant/prompts/` with:
- Default content embedded in binary (or created on init)
- User can override by editing the files
- Consistent template variable substitution

## Acceptance Criteria

- [x] Split prompt moved to `.chant/prompts/split.md`
- [x] Split prompt requires explicit acceptance criteria per subtask
- [x] Split prompt requires edge cases to be enumerated
- [x] `chant init` creates default prompt files if missing
- [x] `assemble_split_prompt()` loads from file instead of hardcoded string
- [x] All existing tests pass
- [x] New test: split prompt loaded from file
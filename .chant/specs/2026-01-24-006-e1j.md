---
type: code
status: completed
target_files:
- src/mcp.rs
commits:
  - 7bc9a71
completed_at: 2026-01-24T12:21:19Z
---
# Add chant_spec_update tool to MCP server

Add the `chant_spec_update` tool to allow agents to update spec status and add output.

## Acceptance Criteria

- [x] Add `chant_spec_update` tool to the tools/list response
- [x] Implement the tool to update spec status
- [x] Accept `id` parameter (required) for spec identification
- [x] Accept `status` parameter (optional) to update spec status
- [x] Accept `output` parameter (optional) to append to spec body
- [x] Save changes to the spec file

## Tool Schema

```json
{
  "name": "chant_spec_update",
  "description": "Update a chant spec status or add output",
  "inputSchema": {
    "type": "object",
    "properties": {
      "id": {
        "type": "string",
        "description": "Spec ID (full or partial)"
      },
      "status": {
        "type": "string",
        "description": "New status (pending, in_progress, completed, failed)"
      },
      "output": {
        "type": "string",
        "description": "Output text to append to spec body"
      }
    },
    "required": ["id"]
  }
}
```

## Agent Output

2026-01-24T12:21:19Z

```
Done. The `chant_spec_update` tool was already fully implemented in `src/mcp.rs`. I verified the implementation:

1. **Tool in tools/list** - Listed at lines 196-217 with the correct schema
2. **Implementation** - `tool_chant_spec_update` function at lines 361-459
3. **id parameter (required)** - Validated at lines 378-381
4. **status parameter (optional)** - Handled at lines 401-421, validates against `pending`, `in_progress`, `completed`, `failed`
5. **output parameter (optional)** - Handled at lines 424-434, appends to body under an `## Output` section
6. **Saves changes** - Uses `spec.save(&spec_path)` at line 450

All 4 MCP tests pass. Committed with message: `chant(2026-01-24-006-e1j): Check off acceptance criteria for chant_spec_update tool````

---
type: research
status: in_progress
---
# Evaluate direct-commit vs always-branch+worktree for agent work

Chant currently supports two modes:
1. **Direct commit**: Agent works in main repo, commits directly to current branch
2. **Branch mode**: Agent works in worktree on `chant/<spec-id>` branch, requires merge

Should we deprecate direct commit and always use branch+worktree?

## Current Behavior

- Default: direct commit (no `--branch` flag)
- Branch mode: `chant work <id> --branch` or config `defaults.branch_mode = true`

## Arguments for Always-Branch

1. **Isolation**: Parallel agents can't conflict
2. **Reversibility**: Easy to discard bad work (`git branch -D`)
3. **Review**: Can inspect changes before merge
4. **Consistency**: One mental model, simpler docs
5. **Safety**: Main branch stays clean until explicit merge

## Arguments for Keeping Direct-Commit

1. **Simplicity**: No merge step for simple tasks
2. **Speed**: Skip worktree creation/cleanup overhead
3. **Solo work**: Single agent doesn't need isolation
4. **Existing workflows**: Some users prefer direct commits

## Questions to Investigate

1. What % of users use branch mode vs direct?
2. How often do direct commits cause issues (conflicts, bad state)?
3. Is worktree overhead significant for small specs?
4. Can we make branch mode feel as simple as direct?

## Recommendation

Research and decide:
- [ ] Document pros/cons with concrete examples
- [ ] Propose: deprecate direct, always-branch, or keep both
- [ ] If keeping both, clarify when to use each in docs
---
type: code
status: completed
model: claude-opus-4-5
target_files:
  - src/cmd/spec.rs
---

# Lint: warn on model waste - opus/sonnet on simple specs should suggest haiku

Add lint warning when expensive models are configured for specs that appear simple enough for haiku.

## Rationale

Haiku is the default model and handles most straightforward specs well. Configuring opus or sonnet explicitly should be reserved for:

- Complex architectural decisions
- Nuanced refactoring
- Security-sensitive code
- Multi-file coordination

Simple specs with opus/sonnet waste resources.

## Simplicity Indicators

A spec is "simple" if ALL of these are true:

| Indicator | Threshold |
|-----------|-----------|
| Acceptance criteria | <= 3 |
| Target files | <= 2 |
| Description | <= 200 words |
| Type | code or task (not driver/research) |

## Warning

When `model: opus` or `model: sonnet` is set on a simple spec:

```
Spec uses 'opus' but appears simple (2 criteria, 1 file, 150 words)
  - Consider removing model field to use default haiku
  - Reserve opus/sonnet for complex architectural work
```

## Edge Cases

- Don't warn if spec has `labels: [complex]` or similar
- Don't warn on driver specs (coordination needs smarter model)
- Don't warn on research specs (synthesis benefits from larger context)

## Acceptance Criteria

- [ ] Lint detects model: opus or model: sonnet in frontmatter
- [ ] Calculates simplicity score based on criteria/files/words
- [ ] Warns only when spec is below simplicity thresholds
- [ ] Excludes driver and research spec types
- [ ] Tests for warning and exclusions

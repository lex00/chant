---
type: code
status: pending
depends_on:
- 2026-01-30-00g-iwz.1
- 2026-01-30-00g-iwz.2
- 2026-01-30-00g-iwz.3
- 2026-01-30-00g-iwz.4
target_files:
- src/status.rs
- src/cli.rs
- Cargo.toml
---
# Watch Mode Implementation

Implement `--watch` flag functionality that refreshes the status output every 5 seconds with screen clearing. Must work with all output modes (regular, brief, JSON).

### Inherited Context

- Watch mode should be interruptible (Ctrl+C)
- Clear screen between updates for clean display
- Respect output mode selection (--brief, --json, or default)

### Acceptance Criteria

- [ ] Watch mode loops indefinitely until interrupted
- [ ] Refresh interval is 5 seconds
- [ ] Screen cleared between updates (use ANSI escape codes or `clearscreen` crate)
- [ ] Works with regular, brief, and JSON output modes
- [ ] Ctrl+C exits cleanly

### Edge Cases

- Terminal doesn't support ANSI codes: Fall back to printing separator line
- Error during refresh: Log error, continue watching (don't crash)
- Rapid spec changes: Each refresh shows current state (no caching)

### Example Test Cases

- Run `chant status --watch`: Should refresh every 5s with cleared screen
- Run `chant status --watch --brief`: Should refresh brief output every 5s
- Press Ctrl+C: Should exit cleanly without panic

---
---
type: code
status: in_progress
labels:
- scoring
- lint
- bug
target_files:
- src/score/splittability.rs
- src/score/traffic_light.rs
branch: chant/2026-02-07-018-tgf
---
# Fix splittability scoring — coupling keywords too aggressive, grade logic inverted

## Context

The splittability scorer (`src/score/splittability.rs`) has two problems discovered during real usage:

### Problem 1: Coupling keyword detection has high false-positive rate

`COUPLING_KEYWORDS` contains a single common English word that appears in nearly every spec describing operations-layer work. This causes 5 of 8 well-structured specs to be flagged Grade D (worst) and turns the entire lint red. The keyword check runs first and overrides all structural analysis.

The multi-word phrases in the list are more specific and less likely to false-positive, but the single-word entry matches too broadly.

### Problem 2: Grade semantics are inverted for splittability

Grade A (3+ headers, 3+ files) means "highly splittable" — but that signals the spec SHOULD be split, which is bad. A focused, single-concern spec gets Grade C (default), which is the desired state. The grading rewards decomposability when it should reward focus.

The traffic light treats any D as red, but D is only assigned by the keyword heuristic, not by structural analysis.

### What AC quality gets right

`src/score/ac_quality.rs` takes the right approach: count-based validation. Grade D = no AC, Grade A = 4+ AC. Simple, useful, hard to false-positive. The splittability scorer should follow a similar philosophy — validate structural properties, not keyword-match on body text.

## Task

Fix the scorer: remove the common single-word entry from `COUPLING_KEYWORDS` (or remove keyword matching entirely). Make any remaining keyword check a downgrade factor rather than an automatic Grade D. Review whether the A/B/C grade semantics correctly reward focused specs. Update tests.

## Acceptance Criteria

- [x] Common single-word coupling keyword removed from `COUPLING_KEYWORDS`
- [x] Coupling keywords (if kept) are a factor, not an automatic Grade D override
- [x] A spec with 2 target files and 6 AC does not score red on splittability alone
- [x] Existing splittability tests updated to match new behavior
- [x] `cargo test` passes
- [x] `cargo clippy -- -D warnings` passes
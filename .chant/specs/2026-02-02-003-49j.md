---
type: code
status: pending
depends_on:
- 2026-02-02-002-5xy
target_files:
- src/mcp.rs
- docs/reference/mcp.md
---
# Add chant_work_list MCP tool to list running work processes

## Context

After starting async work with `chant_work_start`, orchestrating agents need to:
- List all running work processes
- Check if specific processes are still running
- Get summary of parallel execution status

## Implementation

Add `chant_work_list` tool that:
1. Reads process info from `.chant/processes/`
2. Checks if processes are still running (via PID)
3. Returns list with status

```json
{
  "name": "chant_work_list",
  "description": "List running work processes",
  "inputSchema": {
    "type": "object",
    "properties": {
      "process_id": { "type": "string", "description": "Filter to specific process" },
      "include_completed": { "type": "boolean", "description": "Include recently completed processes" }
    }
  }
}
```

**Response:**
```json
{
  "processes": [
    {
      "process_id": "abc123",
      "spec_id": "2026-02-02-001-xyz",
      "pid": 12345,
      "status": "running|completed|failed",
      "started_at": "2026-02-02T10:30:00Z",
      "completed_at": null,
      "mode": "single"
    }
  ],
  "summary": {
    "running": 2,
    "completed": 5,
    "failed": 0
  }
}
```

## Acceptance Criteria

- [ ] Add `tool_chant_work_list` function in src/mcp.rs that reads `.chant/processes/*.json`
- [ ] Add tool schema to `handle_tools_list()` in src/mcp.rs
- [ ] Add match arm for "chant_work_list" in `handle_tools_call()` in src/mcp.rs
- [ ] Detect running processes by checking if PID exists via `std::process::Command::new("kill").args(["-0", &pid])`
- [ ] Add `### chant_work_list` section in docs/reference/mcp.md with example request/response
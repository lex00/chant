---
type: code
status: completed
depends_on:
- 2026-01-30-00e-y44.7
target_files:
- src/score/traffic_light.rs
model: claude-sonnet-4-5-20250929
---
# Traffic Light Logic and Suggestions

Combine dimension grades into traffic light status and generate actionable suggestions.

### Inherited Context

- Traffic light determines readiness: Ready (green), Review (yellow), Refine (red)
- Suggestions should be specific and actionable

### Acceptance Criteria

- [x] Implement `determine_status(score: &SpecScore) -> TrafficLight` function
- [x] Ready: Complexity ≤ B AND Confidence ≥ B AND AC Quality ≥ B
- [x] Refine: Any dimension is D OR Confidence is D
- [x] Review: All other cases (any dimension is C)
- [x] Implement `generate_suggestions(score: &SpecScore) -> Vec<String>` function
- [x] Suggestions based on failing dimensions (e.g., "Add more specific acceptance criteria" for low AC quality)

### Edge Cases

- If multiple dimensions fail, return multiple suggestions
- Isolation grade (optional) should not affect traffic light but can add suggestions
- Suggestions should be unique (no duplicates)

### Example Test Cases

- All grades A → Ready, no suggestions
- Complexity B, Confidence C, AC A → Review, suggestion: "Improve spec structure (add more bullets)"
- Complexity D → Refine, suggestion: "Reduce criteria count or split spec"

### Requires

- Uses `SpecScore` and all grade types from Member 1
- Uses scoring functions from Members 2-7

### Provides

- `determine_status(score: &SpecScore) -> TrafficLight` - Returns traffic light status
- `generate_suggestions(score: &SpecScore) -> Vec<String>` - Returns actionable feedback
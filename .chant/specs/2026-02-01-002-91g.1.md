---
type: code
status: pending
depends_on: []
target_files:
- src/git.rs
---
# Consolidate git commit operations into git.rs

Extract scattered git Command calls from cmd/ files into centralized git.rs functions. This provides a single source of truth for git commit operations and reduces duplication.

### Inherited Context

- Each task must leave code in a compilable state
- Changes should be independently testable
- Maintain existing behavior while improving structure

### Acceptance Criteria

- [x] Add get_commits_in_range(from_ref, to_ref) to git.rs returning Vec<CommitInfo>
- [x] Add get_commit_changed_files(hash) to git.rs returning Vec<String>
- [x] Add get_recent_commits(count) to git.rs returning Vec<CommitInfo>
- [x] Add unit tests for new git.rs functions
- [x] cargo test passes

### Edge Cases

- Invalid git refs should return descriptive errors, not panic
- Empty commit ranges should return empty Vec, not error
- Commits with no changed files should return empty Vec

### Example Test Cases

- get_commits_in_range("HEAD~5", "HEAD") should return 5 commits
- get_commit_changed_files(valid_hash) should return list of file paths
- get_recent_commits(3) should return 3 most recent commits
- get_commits_in_range("invalid", "HEAD") should return Err with context


- `get_commits_in_range(from_ref: &str, to_ref: &str) -> Result<Vec<CommitInfo>>` - Returns commits between refs, Err on invalid refs
- `get_commit_changed_files(hash: &str) -> Result<Vec<String>>` - Returns changed file paths, Err on invalid hash
- `get_recent_commits(count: usize) -> Result<Vec<CommitInfo>>` - Returns N recent commits, Err on git failures
- `CommitInfo` struct with fields: hash, message, author, timestamp
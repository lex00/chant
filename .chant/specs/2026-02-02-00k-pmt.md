---
type: code
status: completed
commits:
- f2e54d7
completed_at: 2026-02-02T14:11:01Z
model: sonnet
---
# Fix test-examples.sh to properly report errors and not claim success on failures

## Problem

Script reports "All examples completed successfully!" even when:
- Specs require approval and can't run
- Specs are rejected and can't run
- Config files are missing

## Acceptance Criteria

- [x] Script tracks individual spec execution failures
- [x] Script reports which specs failed and why at the end
- [x] Script exits with non-zero code if any spec failed to execute
- [x] Expected failures (approval-required, rejected) are noted but don't cause overall failure
- [x] Unexpected failures (missing config, crashes) cause overall failure

## Agent Output

2026-02-02T14:11:01Z

```
I'll fix the test-examples.sh script to properly track and report execution failures.
The issue is that `set -e` (line 3) causes the script to exit on any command failure, but the `chant work` commands can fail in expected ways (approval-required, rejected specs) or unexpected ways (missing config, crashes). The script doesn't distinguish between these cases or track which specs fail.
## Summary

Modified examples/test-examples.sh to properly track and report spec execution failures.

- Removed `set -e` and replaced with selective error handling
- Added tracking arrays for expected vs unexpected failures
- Created wrapper functions to classify chant work failures by output patterns
- Expected failures (approval-required, rejected) don't cause test suite failure
- Unexpected failures (missing config, crashes) cause non-zero exit
- Added detailed summary showing all failures categorized appropriately```

---
type: group
status: completed
target_files:
- src/main.rs
- src/merge.rs
- src/git.rs
- src/config.rs
commits:
- 399404c
- bd22631
- e4464f9
- 3982b92
- 2049eae
completed_at: 2026-01-24T23:30:00Z
model: claude-opus-4-5-20251101
---
# Add merge command to merge spec branches back to main

## Problem

When using `--branch` mode, specs create feature branches but there's no command to merge them back to the configured main branch.

## Solution

Add `chant merge` command to merge completed spec branches to main.

## Commands

```bash
chant merge <spec-id>...       # Merge one or more specs
chant merge --all              # Merge all completed spec branches
chant merge --dry-run          # Preview what would be merged
chant merge --delete-branch    # Delete branch after successful merge
chant merge --continue-on-error # Continue on failures
chant merge --yes              # Skip confirmation prompt
```

## Acceptance Criteria

- [x] Add `merge` subcommand to CLI
- [x] Accept one or more spec IDs as arguments
- [x] Find spec branch using `{branch_prefix}{spec.id}`
- [x] Only merge completed specs (error otherwise)
- [x] Merge to main branch (configurable, default: "main")
- [x] Add `--all` flag to merge all completed spec branches
- [x] Add `--dry-run` flag to preview merges
- [x] Add `--delete-branch` flag to cleanup after merge
- [x] Driver specs: merge all members first, then driver
- [x] Handle merge conflicts gracefully (abort and report)
- [x] Return to original branch after merge
- [x] Add tests for merge command

## Completed by Member Specs

- **01y.1**: Merge command framework and branch finding logic
- **01y.2**: Merge configuration and status validation
- **01y.3**: Single spec merge with branching and return logic
- **01y.4**: Driver spec merge with member ordering
- **01y.5**: `--all` flag and full merge orchestration

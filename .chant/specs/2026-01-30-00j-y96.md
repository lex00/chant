---
type: code
status: in_progress
labels:
- cursor-integration
- enhancement
target_files:
- src/cmd/site.rs
- src/cmd/mod.rs
- src/main.rs
- src/site/mod.rs
- src/site/graph.rs
- src/site/timeline.rs
- src/site/theme.rs
- src/config.rs
- src/spec.rs
- src/lib.rs
- templates/site/base.html
- templates/site/index.html
- templates/site/spec.html
- templates/site/status-index.html
- templates/site/label-index.html
- templates/site/timeline.html
- templates/site/graph.html
- templates/site/changelog.html
- templates/site/styles.css
---
# Site documentation generation from specs

## Problem

Chant specs are well-structured markdown with YAML frontmatter. Users want to publish spec documentation as browsable websites for team visibility, project history, and stakeholder communication.

## Solution

Built-in static site generator with:
- **Tera templates** for user-customizable themes
- **ASCII graphs** for dependency visualization (no JavaScript)
- **Multi-page structure** with configurable content
- **Embedded default theme** with easy customization path

## Commands

```bash
chant site init                    # Copy theme to .chant/site/theme/
chant site build --output ./public/  # Generate static HTML
chant site serve --port 3000       # Local preview server
```

## Architecture

### Template Engine: Tera
- Jinja2-like syntax (widely known)
- Runtime template loading (users edit without recompiling chant)
- ~500KB binary size impact

### ASCII Graphs
No JavaScript. Server-side generated box-drawing characters:

```
┌─────────────┐
│ 00a-xyz     │
│ Auth setup  │
└──────┬──────┘
       │
       ▼
┌─────────────┐     ┌─────────────┐
│ 00b-abc     │────▶│ 00c-def     │
│ OAuth       │     │ API keys    │
└─────────────┘     └─────────────┘
```

Graph detail level configurable: IDs only, +titles, +status, +labels.

### ASCII Timeline

```
2026-01-30
├── ✓ 00d-vao  Spec Templates (completed)
├── ◐ 00e-y44  Complexity Scoring (in_progress)
└── ○ 00f-gqz  Cost Tracking (pending)

2026-01-29
├── ✓ 00a-xyz  Auth setup
└── ✓ 00b-abc  OAuth integration
```

## Theme Customization

`chant site init` copies full theme to `.chant/site/theme/`:

```
.chant/site/theme/
├── base.html          # Page skeleton, head, nav
├── spec.html          # Individual spec page
├── index.html         # Main index page
├── status-index.html  # By-status listing
├── label-index.html   # By-label listing
├── timeline.html      # Timeline view
├── graph.html         # Dependency graph view
├── changelog.html     # Changelog view
└── styles.css         # All styling
```

Users edit templates directly. No partial override magic - explicit and visible.

## Configuration

```yaml
# In config.md
site:
  output_dir: ./public/
  base_url: /specs/
  title: "Project Specs"

  # Content filtering
  include:
    statuses: [completed, in_progress, pending]
    labels: []  # empty = all
  exclude:
    labels: [internal, wip]
    fields: [cost_usd, tokens]  # Redact from output

  # Spec-level override
  # In spec frontmatter: `public: false` excludes from site

  # Features (all default true except noted)
  features:
    changelog: true
    dependency_graph: true
    timeline: true
    status_indexes: true
    label_indexes: true

  # Graph options
  graph:
    detail: full  # minimal | titles | full
    # minimal: IDs only
    # titles: IDs + titles
    # full: IDs + titles + status + labels

  # Timeline options
  timeline:
    group_by: day  # day | week | month
    include_pending: false
```

## Output Structure

```
public/
├── index.html              # Main landing
├── specs/
│   ├── 2026-01-30-00a-xyz.html
│   ├── 2026-01-30-00b-abc.html
│   └── ...
├── status/
│   ├── completed.html
│   ├── in-progress.html
│   └── pending.html
├── labels/
│   ├── auth.html
│   ├── api.html
│   └── ...
├── timeline.html
├── graph.html
├── changelog.html
└── styles.css
```

## Privacy Controls

### Spec-level exclusion
```yaml
# In spec frontmatter
public: false  # Excluded from site generation
```

### Field redaction
Configure in `site.exclude.fields` - those fields stripped from output.

### Label-based filtering
`site.exclude.labels: [internal]` - specs with that label excluded.

## Acceptance Criteria

### Core
- [x] `chant site init` creates `.chant/site/theme/` with default templates
- [x] `chant site build` generates static HTML to output directory
- [x] `chant site serve` starts local HTTP server for preview
- [x] Tera template engine integration
- [x] Embedded default theme (CSS + templates compiled into binary)

### Pages
- [x] Individual spec pages with full content
- [x] Main index page listing all included specs
- [x] Status index pages (completed, in-progress, pending)
- [x] Label index pages (one per label)
- [x] Timeline page with ASCII timeline
- [x] Graph page with ASCII dependency graph
- [x] Changelog page grouped by date

### ASCII Visualizations
- [x] Dependency graph using box-drawing characters
- [x] Graph detail levels: minimal, titles, full
- [x] Timeline with tree structure (├── └──)
- [x] Timeline grouping: day, week, month

### Configuration
- [x] Site config section in config.md
- [x] Include/exclude by status and label
- [x] Field redaction (exclude.fields)
- [x] `public: false` frontmatter support
- [x] Feature toggles for each page type
- [x] Graph and timeline options

### Theme System
- [x] Templates loaded from `.chant/site/theme/` if present
- [x] Falls back to embedded defaults if no theme directory
- [x] Template variables documented

## Future Considerations (Deferred)

- Search functionality (client-side index)
- RSS/Atom feed for completed specs
- PDF export
- Multi-project aggregation
- Custom pages (user-authored markdown)
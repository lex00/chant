---
type: code
status: completed
depends_on:
- 2026-01-27-006-ust
target_files:
- src/cmd/spec.rs
- src/cmd/export.rs
- src/spec.rs
- src/cmd/derive.rs
- tests/integration_tests.rs
model: claude-haiku-4-5-20251001
completed_at: 2026-01-27T00:00:00Z
---
# Update UI to distinguish derived vs explicit fields

## Problem

Users should be able to see which frontmatter fields were derived automatically vs set manually. This helps with:
- Debugging derivation patterns
- Understanding what fields are auto-managed
- Transparency in automation

Commands to update:
- `chant show <spec-id>` - Display frontmatter with derivation indicators
- `chant export` - Include derivation metadata in exports

## Solution

### Option 1: Visual Markers in Display (Recommended)

```bash
$ chant show 2026-01-27-001-abc
ID: 2026-01-27-001-abc
Status: completed
Team: platform [derived]
Component: api [derived]
Jira Key: PROJ-123 [derived]
Assignee: alice

Description:
Add authentication...
```

### Option 2: Separate Sections

```bash
$ chant show 2026-01-27-001-abc

Explicit Fields:
  status: completed
  assignee: alice

Derived Fields:
  team: platform (from path)
  component: api (from path)
  jira_key: PROJ-123 (from branch)
```

### Implementation

Track derived field names in spec metadata or comment in frontmatter:

```yaml
---
status: completed
team: platform
jira_key: PROJ-123
# Derived: team, jira_key
---
```

Update `src/render.rs` or `src/cmd/spec.rs` display logic to:
- Parse derived field list from frontmatter comment
- Add "[derived]" suffix when printing these fields
- Include derived metadata in export formats (JSON, CSV)

## Acceptance Criteria

- [x] Track which fields are derived (comment in frontmatter or separate metadata)
- [x] Update `chant show` to mark derived fields with "[derived]" indicator
- [x] Update `chant export --format json` to include derived field metadata
- [x] Derived field indicators shown for all derivation sources (branch, path, env, git_user)
- [x] Fields without derivation show normally (no indicator)
- [x] Add integration test: show command displays derived indicators
- [x] Add integration test: export includes derived metadata
- [x] All tests pass
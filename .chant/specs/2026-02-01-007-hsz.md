---
type: code
status: in_progress
target_files:
- src/cmd/work/parallel.rs
- src/cmd/work/single.rs
---
# Bug: Worktree gets stale spec status (pending) instead of in_progress

## Problem

When `chant work --parallel` runs, it:
1. Updates spec status to `in_progress` and saves to disk (line 468-469 in parallel.rs)
2. Creates a worktree with `git worktree add -b branch /path` (line 509)

The worktree is created from HEAD (last committed state), not the working directory. So the worktree gets the old committed spec file with `status: pending` instead of the updated `status: in_progress`.

This causes `chant list` and `chant status` to show zero in_progress specs even while work is actively happening.

## Root Cause

`git worktree add -b branch path` creates a new branch from HEAD and checks it out in the worktree. The in_progress status change is saved to the working directory but not committed, so the worktree doesn't see it.

## Solution Options

**Option A: Commit status change before creating worktree**
- After saving in_progress status, commit it to main
- Then create worktree
- Pro: Clean git history
- Con: Adds commits to main for every spec start

**Option B: Copy updated spec to worktree after creation**
- Create worktree
- Copy the in_progress spec file from main working dir to worktree
- Commit in worktree
- Pro: No commits to main
- Con: Extra file copy step

**Recommended: Option B** - Copy the updated spec file to the worktree after creation.

## Acceptance Criteria

- [x] After worktree creation, spec file is copied from main to worktree
- [x] Worktree spec has status: in_progress
- [x] `chant list --status in_progress` shows specs being worked in worktrees
- [x] Fix applies to both parallel.rs and single.rs (if applicable)
- [x] Add test case verifying worktree spec has correct status
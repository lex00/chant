---
type: code
status: pending
target_files:
- .chant/config.md
- src/cmd/spec.rs
- docs/reference/config.md
---

# Remove stale config fields from .chant/config.md

## Problem

The `pr: false` field in `defaults:` section is stale - it's a leftover from removed functionality:
- ❌ Not in `DefaultsConfig` struct (src/config.rs)
- ❌ Not in `SpecFrontmatter` struct (src/spec.rs)
- ❌ Not accessed anywhere in code (`.pr` has zero matches)
- ✅ Only appears in test fixtures and example configs

This creates confusion - users see the field in config and think it does something.

## Solution

### 1. Remove from Active Configs

Remove `pr: false` from:
- `.chant/config.md` (project config)
- `~/.config/chant/config.md` docs (if mentioned)
- `docs/reference/config.md` examples

### 2. Audit Test Fixtures

Search test files for `pr:` and:
- Remove if test doesn't need it
- Keep with comment `# legacy field for backwards compat test` if needed for parsing tests

### 3. Comprehensive Config Audit

Check for other stale fields:

**DefaultsConfig actual fields** (src/config.rs:248-263):
- `prompt: String`
- `branch: bool`
- `branch_prefix: String`
- `model: Option<String>`
- `split_model: Option<String>`
- `main_branch: String` (dead_code, still in struct)
- `rotation_strategy: RotationStrategy`

**Check documentation matches implementation:**
- Does docs/reference/config.md document all of these?
- Are there fields in docs not in struct?
- Are field descriptions accurate?

### 4. Update Config Template

The config template in `src/main.rs` (init command) should not include stale fields.

## Acceptance Criteria

- [ ] Remove `pr: false` from .chant/config.md
- [ ] Remove `pr:` from test fixtures or mark as legacy
- [ ] Audit DefaultsConfig struct vs documentation
- [ ] Verify all config fields in docs are implemented
- [ ] Verify all implemented fields are documented
- [ ] Update config template in src/main.rs if needed
- [ ] Check docs/reference/config.md for accuracy
- [ ] All tests passing
- [ ] Code linted and formatted

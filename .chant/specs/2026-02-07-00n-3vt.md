---
type: code
status: pending
labels:
- tests
- cleanup
target_files:
- tests/test_commands.rs
---
# Remove or enhance trivial smoke tests in test_commands.rs

## Context

`tests/test_commands.rs` (172 LOC, 10 tests) has several tests that don't actually test command behavior. They create setup and then assert trivially:

- `test_cleanup_worktree_parsing` — only asserts `harness.specs_dir.exists()` (tests TestHarness, not cleanup)
- `test_cleanup_dry_run_mode` — creates a spec and asserts the file exists (tests fs::write, not cleanup)
- `test_approve_pending_spec` — creates a spec with approval required and asserts `status == Pending` (tests SpecFactory, not approve)
- `test_pause_spec_status` — creates an in_progress spec and asserts `status == InProgress` (tests create, not pause)
- `test_pause_nonexistent_spec` — duplicates `test_approve_nonexistent_spec` (both call `resolve_spec` with "nonexistent")

The remaining tests are meaningful:
- `test_approve_already_approved_spec` — verifies approval field parsing
- `test_approve_nonexistent_spec` — verifies resolve_spec error
- `test_silent_config_check` — verifies config default
- `test_silent_config_persists` — verifies config file content
- `test_pause_status_transition` — verifies status save round-trip

## Task

1. Delete the 5 trivial tests listed above
2. For the remaining tests, ensure they use SpecFactory where applicable
3. If the file becomes very small (<5 tests), consider whether these tests should move to their respective command test files or stay

## Acceptance Criteria

- [ ] Trivial smoke tests are removed (the 5 listed above)
- [ ] `test_pause_nonexistent_spec` is removed (duplicate of approve version)
- [ ] Remaining tests still pass
- [ ] All existing tests pass
- [ ] `cargo clippy` passes
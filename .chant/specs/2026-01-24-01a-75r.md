---
type: code
status: in_progress
target_files:
- src/main.rs
model: claude-opus-4-5
---
# Default to Haiku model for agent invocation

Use Haiku as the default model for `chant work` to reduce costs and improve speed for most tasks.

## Acceptance Criteria

- [x] Add `--model haiku` flag to claude CLI invocation
- [x] Model flag should be configurable via `defaults.model` in config
- [x] Environment variables (CHANT_MODEL, ANTHROPIC_MODEL) should override the default
- [x] All tests pass

## Implementation

In `invoke_agent()` and `invoke_agent_with_prefix()`, add the model flag:

```rust
.arg("--model")
.arg("haiku")
```

The priority should remain:
1. CHANT_MODEL env var
2. ANTHROPIC_MODEL env var
3. defaults.model in config
4. "haiku" as hardcoded fallback
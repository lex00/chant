---
type: code
status: pending
target_files:
  - src/main.rs
  - src/cmd/export.rs
  - docs/reference/cli.md
---

# Add interactive wizard mode to chant export command - choose format and filters

## Overview

When `chant export` is run without flags, launch an interactive wizard to configure export options.

## Interface

```bash
chant export                           # Wizard mode
chant export --format csv --ready      # Direct mode (existing)
```

### Wizard Flow

```
? Export format:
› JSON
  CSV
  Markdown

? Filter by status:
  [ ] pending
  [x] ready
  [ ] in_progress
  [ ] completed
  [ ] blocked
› [No filter - all statuses]

? Filter by type:
› No filter
  code
  task
  driver
  documentation
  research

? Output destination:
› Print to stdout
  Save to file

Exporting 12 specs to JSON...
```

## Implementation

- Detect if running with no flags (wizard mode) vs with flags (direct mode)
- Use `dialoguer::Select` for format (JSON, CSV, Markdown)
- Use `dialoguer::MultiSelect` for status filter (include "all" option)
- Use `dialoguer::Select` for type filter (include "all" option)
- Use `dialoguer::Select` for output (stdout vs file)
- If file selected, use `dialoguer::Input` for filename
- Pass selections to existing export logic

## Acceptance Criteria

- [x] `chant export` (no args) launches wizard
- [x] Wizard prompts for: format, status, type, output
- [x] Multi-select for status filter with "all" option
- [x] Direct mode flags still work unchanged
- [x] Tests for wizard flow
- [x] Documentation updated (CLI reference auto-updated by spec system)

## Implementation Details

### Changes Made

1. **Modified CLI Structure** (src/main.rs):
   - Changed `format` flag from required with default to optional
   - Allows detection of wizard mode when no flags are provided

2. **Updated Export Command** (src/cmd/export.rs):
   - Added `WizardOptions` struct to cleanly handle wizard output
   - Implemented `run_wizard()` function with interactive prompts:
     - Format selection: JSON, CSV, Markdown (default: JSON)
     - Status filter: Multi-select from pending/ready/in_progress/completed/blocked/cancelled (default: ready)
     - Type filter: Select from code/task/driver/documentation/research (default: no filter)
     - Output: Select stdout or file with optional filename input
   - Wizard is triggered when no format and no other filters are provided
   - Direct mode (with flags) works unchanged and bypasses wizard

3. **Fixed Clippy Warnings**:
   - Added `#[allow(clippy::too_many_arguments)]` to export functions
   - Fixed string comparison issues in date filtering

4. **Added Tests** (src/cmd/export.rs):
   - Test for default wizard options
   - Test for wizard options with type filter
   - All existing tests continue to pass

### How It Works

```bash
# Wizard mode: no flags triggers interactive wizard
chant export

# Direct mode: with flags skips wizard
chant export --format json --ready
chant export --format csv --type code --status ready completed
```

The wizard detects if the user is in "wizard mode" by checking:
- No format specified
- No status filters specified
- No type filter specified
- No labels specified
- Not ready-only mode
- No date range filters
- No output file specified

If all conditions are met, the wizard launches. Otherwise, direct mode executes.

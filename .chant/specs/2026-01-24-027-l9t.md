---
type: code
status: completed
target_files:
- src/spec.rs
- src/main.rs
model: claude-haiku-4-5-20251001
---
# Driver auto complete - when last member of group completes, driver should also be completed

## Problem

Currently, when all member specs of a group are completed, the driver spec remains in `in_progress` status. Users must manually mark the driver as completed or use a separate command.

## Solution

Automatically mark the driver spec as `completed` when the last member spec of its group completes.

## Implementation

1. Add helper function `auto_complete_driver_if_ready(spec_id: &str, all_specs: &[Spec], spec_dir: &Path) -> Result<bool>` in spec.rs
2. Call this function after a member spec completes in both `cmd_work()` and `cmd_work_parallel()`
3. The driver's `model` field should be `None` since no agent ran on it
4. Print a message when driver is auto-completed

## Acceptance Criteria

- [x] Add `auto_complete_driver_if_ready()` function to spec.rs
- [x] When a member spec completes, check if all siblings are now completed
- [x] If all members complete, automatically mark driver as completed
- [x] Driver's `completed_at` is set to current time
- [x] Driver's `model` is set to `auto-completed`
- [x] Print message: "Auto-completed driver spec: {driver_id}"
- [x] Works in both sequential and parallel execution paths
- [x] Add tests for auto-completion logic
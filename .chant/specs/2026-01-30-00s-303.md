---
type: code
status: completed
depends_on:
- 2026-01-30-00r-en5
target_files:
- src/cmd/spec/lint.rs
commits:
- 2f435a1
completed_at: 2026-01-30T19:01:28Z
model: sonnet
---
# Create LintRule enum (Complexity, Coupling, Type, ModelWaste, Approval, Output, Dependency, Required, Title, Parse) with as_str() method. Create Severity enum (Error, Warning). Create LintDiagnostic struct with spec_id, rule, severity, message, suggestion. Create LintReport struct with diagnostics vec and passed/warned/failed/total counts. Add helper methods error(), warning(), with_suggestion(), has_errors(), has_warnings().

## Agent Output

2026-01-30T19:01:28Z

```
I'll implement this spec by creating the linting data structures for the chant project. Let me start by exploring the codebase to understand the current structure.
Now I'll create the linting data structures. I can see the file has validation functions that return `Vec<String>` warnings. I'll add the new types at the top of the file after the imports and before the validation thresholds section.
I see that there are existing clippy errors in the codebase that are unrelated to my changes. According to the instructions, if I encounter issues outside my scope, I should create a spec for them and continue with my work. Let me verify that my code compiles on its own first.
Good! My changes don't introduce any clippy errors. The existing clippy errors are in other files. Let me check if there's already a spec for fixing these clippy issues.
Perfect! There's already a spec to fix the clippy warnings (2026-01-30-011-ddj). My code compiles with warnings about unused code, which is expected since these are new types that will be used in future specs. Let me continue with testing.
Excellent! All tests pass. Now let me check the acceptance criteria in the spec file and mark them as complete.
I notice the spec file doesn't have explicit acceptance criteria checkboxes. Looking at the dependency spec 2026-01-30-00r-en5, let me check if it has a specific format I should follow.
I see - this spec (like my current spec) doesn't have explicit checkboxes because it's a simple implementation spec. The spec title itself describes all the requirements. Since there are no checkboxes to check off, I should add a model field to the frontmatter to indicate completion, then commit. Let me verify my implementation meets all requirements first:

**Requirements from spec title:**
1. ✅ Create LintRule enum (Complexity, Coupling, Type, ModelWaste, Approval, Output, Dependency, Required, Title, Parse)
2. ✅ Add as_str() method to LintRule
3. ✅ Create Severity enum (Error, Warning)
4. ✅ Create LintDiagnostic struct with spec_id, rule, severity, message, suggestion
5. ✅ Create LintReport struct with diagnostics vec and passed/warned/failed/total counts
6. ✅ Add helper methods: error(), warning(), with_suggestion(), has_errors(), has_warnings()

All requirements are met. Now let me add the model field to the frontmatter.
Now let me commit the changes.
Perfect! Now let me stage and commit the changes.
Perfect! The implementation is complete. Let me provide a summary:

## Implementation Complete

I've successfully implemented all the linting data structures for the chant project as specified in `2026-01-30-00s-303`:

### Created Types in `src/cmd/spec/lint.rs:24-146`

1. **LintRule enum** - 10 variants for different lint rule categories:
   - Complexity, Coupling, Type, ModelWaste, Approval, Output, Dependency, Required, Title, Parse
   - Includes `as_str()` method for string representation

2. **Severity enum** - 2 variants:
   - Error (spec invalid, must be fixed)
   - Warning (spec valid but could be improved)

3. **LintDiagnostic struct** - Fields:
   - `spec_id: String`
   - `rule: LintRule`
   - `severity: Severity`
   - `message: String`
   - `suggestion: Option<String>`

4. **LintReport struct** - Fields:
   - `diagnostics: Vec<LintDiagnostic>`
   - `passed: usize`
   - `warned: usize`
   - `failed: usize`
   - `total: usize`

### Helper Methods

- `LintDiagnostic::error()` - Create error diagnostic
- `LintDiagnostic::warning()` - Create warning diagnostic
- `LintDiagnostic::with_suggestion()` - Add suggestion to diagnostic
- `LintReport::has_errors()` - Check if report contains errors
- `LintReport::has_warnings()` - Check if report contains warnings

All tests pass, code is formatted, and changes are committed. The untracked `.mcp.json` file is not related to this spec.```

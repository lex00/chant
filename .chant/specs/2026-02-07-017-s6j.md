---
type: code
status: in_progress
depends_on:
- 2026-02-07-016-4b7
labels:
- state-machine
- safety
target_files:
- src/spec/parse.rs
- src/cmd/work/executor.rs
- src/cmd/work/parallel.rs
- src/cmd/watch.rs
branch: chant/2026-02-07-017-s6j
---
# Route error-recovery force_status through TransitionBuilder, restrict visibility

## Context

After spec 016 converts normal paths to use `TransitionBuilder`, the remaining `force_status` calls are in error-recovery paths:

- `cmd/work/executor.rs:373,484,502` — marking specs Failed/NeedsAttention after agent failure
- `cmd/work/parallel.rs:439,530,677,1105` — marking specs Failed/NeedsAttention in parallel mode
- `cmd/watch.rs:446,760` — marking stale specs as Failed
- `cmd/finalize.rs:257` — re-finalize (explicit recovery operation)
- `cmd/finalize.rs:505` — auto-complete parent group

These are legitimate force uses (agent may leave spec in unexpected state), but they should go through `TransitionBuilder::force()` for consistency and logging, not raw `force_status`.

## Task

1. Replace all remaining `spec.force_status(status)` calls with `TransitionBuilder::new(spec).force().to(status)`
2. Make `Spec::force_status` either `pub(crate)` or remove it entirely — all callers should use `TransitionBuilder::force()`
3. Verify the builder's `.force()` path logs the bypass (it already does via the `force` flag)

## Acceptance Criteria

- [x] Zero direct calls to `spec.force_status()` remain in non-test code (grep verification)
- [x] All error-recovery paths use `TransitionBuilder::new(spec).force().to(status)`
- [x] `Spec::force_status` is removed or made `pub(crate)` (not public API)
- [x] `cargo test` passes
- [x] `cargo clippy -- -D warnings` passes
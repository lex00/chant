---
type: code
status: completed
model: opus
target_files:
  - src/merge.rs
---

# Unify spec ID matching in merge command to use resolve_spec like other commands

## Problem

The merge command used simpler ID matching logic (exact + suffix only) compared to `resolve_spec` which also supports contains matching. This meant `chant merge 00e` failed while `chant work 00e` succeeded.

## Solution

Updated `get_specs_to_merge` in merge.rs to use the same matching strategy as `resolve_spec`:
1. Exact match
2. Suffix match (ends_with) - single match only
3. Contains match (partial_id anywhere in spec.id) - single match only
4. Ambiguous error if multiple matches

## Acceptance Criteria

- [x] `chant merge 00e` works the same as `chant work 00e`
- [x] Ambiguous IDs produce helpful error message listing matches
- [x] Code builds without errors

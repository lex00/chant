---
type: code
status: completed
commits:
- 2b1c654
completed_at: 2026-02-02T22:26:39Z
model: sonnet
---
# Consolidate merge-driver-setup into init --merge-driver flag

## Problem

The `chant merge-driver-setup` command is a standalone command that users must run separately after `chant init`. This adds unnecessary friction to the initialization process.

## Solution

Consolidate the merge driver setup into `chant init` via a `--merge-driver` flag. Remove the standalone `chant merge-driver-setup` command.

### Implementation

1. Add `--merge-driver` flag to the `Init` command in `src/main.rs`
2. Modify `cmd_init` to conditionally call `setup_merge_driver()` when flag is set
3. Remove the `MergeDriverSetup` command variant from the `Commands` enum
4. Remove the `cmd_merge_driver_setup` function
5. Update all test functions to pass the new parameter

### User Impact

- Simpler initialization: `chant init --merge-driver` instead of two commands
- No breaking changes for existing users (flag is optional)
- Merge driver can still be set up later by running `chant init --merge-driver` on an existing project

## Acceptance Criteria

- [x] `chant merge-driver-setup` command removed from CLI
- [x] `chant init` accepts `--merge-driver` flag
- [x] When flag is set, merge driver setup code runs (existing `setup_merge_driver()` logic)
- [x] When flag is NOT set, merge driver setup is skipped
- [x] Help output for `chant init` shows the new flag
- [x] CHANGELOG.md updated with this change

## Agent Output

2026-02-02T22:26:39Z

```
I'll implement this task by consolidating the merge-driver-setup command into an --merge-driver flag for the init command.
## Summary

Changed src/main.rs, src/cmd/derive.rs, and CHANGELOG.md to consolidate `chant merge-driver-setup` into `chant init --merge-driver`.

- Removed standalone `MergeDriverSetup` command variant
- Added `--merge-driver: bool` flag to `Init` command
- Modified `cmd_init` to conditionally run merge driver setup only when flag is set
- Removed `cmd_merge_driver_setup` function (37 lines)
- Updated all test call sites (11 occurrences) to include new parameter
- Updated CHANGELOG.md```

---
type: code
status: pending
target_files:
- Cargo.toml
---

# Fix Linux musl build by using rustls instead of native-tls

## Problem

The v0.1.4 release build fails on `x86_64-unknown-linux-musl` target:

```
Could not find directory of OpenSSL installation
$TARGET = x86_64-unknown-linux-musl
```

## Root Cause

The `ollama-rs` dependency was added in v0.1.4. Its default features include `reqwest/default-tls` which uses OpenSSL via `native-tls`. OpenSSL requires system libraries that aren't available when cross-compiling to musl.

## Solution

Configure `ollama-rs` to use `rustls` instead of `native-tls`:

```toml
# Before (uses OpenSSL)
ollama-rs = "0.3"

# After (uses rustls, pure Rust)
ollama-rs = { version = "0.3", default-features = false, features = ["rustls"] }
```

This matches how `ureq` is already configured in the project.

## Acceptance Criteria

- [ ] Update Cargo.toml to use rustls for ollama-rs
- [ ] `cargo build --release` succeeds locally
- [ ] Verify OpenSSL is not in dependency tree: `cargo tree | grep -i openssl` returns nothing
- [ ] All tests pass
- [ ] Commit the fix

## Notes

After this fix, a new release (v0.1.5) should be cut to fix the broken v0.1.4 Linux build.

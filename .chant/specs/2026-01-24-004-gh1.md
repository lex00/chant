---
type: code
status: in_progress
target_files:
- src/mcp.rs
- src/main.rs
- Cargo.toml
commit: 77c82bb
completed_at: 2026-01-24T04:28:55Z
---
# Add MCP server with chant_spec_list tool

Implement an MCP (Model Context Protocol) server that exposes chant tools to AI agents via JSON-RPC over stdio.

## Acceptance Criteria

- [x] Create new `src/mcp.rs` module for MCP server implementation
- [x] Implement JSON-RPC 2.0 protocol over stdin/stdout
- [x] Handle `initialize` method to establish connection
- [x] Handle `tools/list` method to advertise available tools
- [x] Implement `chant_spec_list` tool that returns list of specs
- [x] Handle `tools/call` method to execute tool calls
- [x] Add `chant mcp` subcommand to start the MCP server

## Implementation Notes

- Use synchronous I/O (no async runtime needed for stdio)
- JSON-RPC format: `{"jsonrpc": "2.0", "method": "...", "params": {...}, "id": 1}`
- Response format: `{"jsonrpc": "2.0", "result": {...}, "id": 1}`
- The `chant_spec_list` tool should accept optional `status` parameter to filter
- Return specs as JSON in the tool result content

## Tool Schema for chant_spec_list

```json
{
  "name": "chant_spec_list",
  "description": "List all chant specs in the current project",
  "inputSchema": {
    "type": "object",
    "properties": {
      "status": {
        "type": "string",
        "description": "Filter by status (pending, in_progress, completed, failed)"
      }
    }
  }
}
```
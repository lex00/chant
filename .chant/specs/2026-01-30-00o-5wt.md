---
type: code
status: in_progress
labels:
- bug
- ux
target_files:
- src/cmd/work.rs
model: claude-opus-4-5-20251101
---
# Reject multiple spec IDs without --chain or --parallel flag

## Problem

When a user runs `chant work spec1 spec2` without `--chain` or `--parallel`, the command silently takes only the first ID and ignores the rest. This is confusing - the user expects both specs to be worked.

Current behavior in `src/cmd/work.rs:344-346`:
```rust
} else {
    (ids[0].clone(), None, false)
};
```

## Solution

Add validation before line 316 to reject multiple IDs without the appropriate flag, with a helpful error message explaining how to use `--chain` or `--parallel`.

```rust
// Reject multiple IDs without --chain or --parallel
if ids.len() > 1 {
    anyhow::bail!(
        "Multiple spec IDs provided without --chain or --parallel.\n\
         Use --chain to execute specs sequentially: chant work --chain {} {}\n\
         Use --parallel to execute specs concurrently: chant work --parallel {} {}",
        ids[0], ids[1], ids[0], ids[1]
    );
}
```

## Acceptance Criteria

- [x] Add validation in `cmd_work()` to check `ids.len() > 1` when not in chain/parallel mode
- [x] Error message includes example usage for both `--chain` and `--parallel`
- [x] Error uses the actual spec IDs the user provided in the examples
- [x] Single ID still works as before (no regression)
- [x] All tests pass
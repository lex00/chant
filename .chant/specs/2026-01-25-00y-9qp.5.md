---
type: code
status: completed
depends_on:
- 2026-01-25-00y-9qp.4
target_files:
- src/cmd/lifecycle.rs
- src/main.rs
- src/cmd/spec.rs
model: claude-haiku-4-5-20251001
---
# Extract lifecycle commands to src/cmd/lifecycle.rs

Move remaining lifecycle and utility commands. These are lower-volume but logically related functions.

### Acceptance Criteria

- [x] All lifecycle command functions moved to `src/cmd/lifecycle.rs`:
  - [x] `cmd_merge()`
  - [x] `cmd_archive()`
  - [x] `cmd_split()`
  - [x] `cmd_diagnose()`
  - [x] `cmd_log()`
  - [x] `cmd_log_at()`
  - [x] Branch/PR operation helpers preserved
- [x] Public API exports all commands as pub fn
- [x] `src/main.rs` dispatches lifecycle commands to `cmd::lifecycle`
- [x] Branch and PR operations still work correctly
- [x] Spec merging logic preserved
- [x] Spec splitting with member creation works correctly
- [x] Diagnostics and logging unchanged
- [x] `just check` passes

### Edge Cases

- **Log file discovery**: Ensure log file lookup still finds spec execution logs in correct locations
- **Branch operations**: Verify branch creation and PR operations work with new module
- **Spec splitting**: Check that split operations create member specs correctly with proper numbering
- **Archive logic**: Confirm archive operations still move specs properly
- **Diagnosis output**: Verify diagnostic information is complete and correctly formatted

### Example Test Cases

For lifecycle commands, verify:
- `cmd_log()` finds and displays spec execution logs correctly
- `cmd_split()` creates member specs with correct numbering (e.g., spec.1, spec.2)
- `cmd_merge()` correctly handles completed specs ready for merging
- `cmd_archive()` moves specs to archive directory
- `cmd_diagnose()` produces detailed diagnostic information
- Branch creation and PR operations still function correctly
---
type: task
status: pending
---

# Create Homebrew tap and formula for chant installation

## Problem

```bash
$ brew install lex00/tap/chant
==> Tapping lex00/tap
remote: Repository not found.
fatal: repository 'https://github.com/lex00/homebrew-tap/' not found
```

The Homebrew tap repository doesn't exist yet.

## Solution

Create `lex00/homebrew-tap` repository with a formula for chant.

## Step 1: Create the Tap Repository

```bash
# Create new repo on GitHub
gh repo create lex00/homebrew-tap --public --description "Homebrew formulae for lex00 projects"

# Clone it
git clone https://github.com/lex00/homebrew-tap
cd homebrew-tap
```

## Step 2: Create the Formula

Create `Formula/chant.rb`:

```ruby
class Chant < Formula
  desc "Intent Driven Development - specification-driven development tool"
  homepage "https://github.com/lex00/chant"
  version "0.1.0"
  license "MIT"

  on_macos do
    if Hardware::CPU.arm?
      url "https://github.com/lex00/chant/releases/download/v#{version}/chant-macos-aarch64"
      sha256 "REPLACE_WITH_ACTUAL_SHA256"
    else
      url "https://github.com/lex00/chant/releases/download/v#{version}/chant-macos-x86_64"
      sha256 "REPLACE_WITH_ACTUAL_SHA256"
    end
  end

  on_linux do
    url "https://github.com/lex00/chant/releases/download/v#{version}/chant-linux-x86_64"
    sha256 "REPLACE_WITH_ACTUAL_SHA256"
  end

  def install
    if OS.mac? && Hardware::CPU.arm?
      bin.install "chant-macos-aarch64" => "chant"
    elsif OS.mac?
      bin.install "chant-macos-x86_64" => "chant"
    else
      bin.install "chant-linux-x86_64" => "chant"
    end
  end

  test do
    system "#{bin}/chant", "--version"
  end
end
```

## Step 3: Get SHA256 Hashes

```bash
# For each release artifact:
curl -sL https://github.com/lex00/chant/releases/download/v0.1.0/chant-macos-aarch64 | shasum -a 256
curl -sL https://github.com/lex00/chant/releases/download/v0.1.0/chant-macos-x86_64 | shasum -a 256
curl -sL https://github.com/lex00/chant/releases/download/v0.1.0/chant-linux-x86_64 | shasum -a 256
```

## Step 4: Commit and Push

```bash
cd homebrew-tap
mkdir -p Formula
# Create Formula/chant.rb with content above (with real SHA256s)
git add Formula/chant.rb
git commit -m "Add chant formula v0.1.0"
git push
```

## Step 5: Test Installation

```bash
brew tap lex00/tap
brew install chant
chant --version
```

## Future: Automate Formula Updates

Add to `.github/workflows/release.yml` in chant repo:

```yaml
- name: Update Homebrew formula
  env:
    HOMEBREW_TAP_TOKEN: ${{ secrets.HOMEBREW_TAP_TOKEN }}
  run: |
    # Calculate SHA256s and update formula
    # Push to homebrew-tap repo
```

Or use `brew bump-formula-pr` pattern.

## Acceptance Criteria

- [ ] Create `lex00/homebrew-tap` repository on GitHub
- [ ] Create `Formula/chant.rb` with correct URLs
- [ ] Calculate SHA256 hashes for all release artifacts
- [ ] Test `brew install lex00/tap/chant` works
- [ ] Test `chant --version` runs after install
- [ ] Document in README how to install via Homebrew

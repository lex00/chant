---
type: code
status: pending
target_files:
- src/main.rs
---
# Add finalization helper function with error handling

Extract the spec finalization logic into a dedicated, testable helper function that ensures all fields (status, commits, completed_at, model) are set atomically before saving. This function should be used by both sequential and parallel modes.


## Acceptance Criteria

- [ ] Implement as described
- [ ] All tests pass
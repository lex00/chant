---
type: code
status: pending
---

# Fix: chant work --chain with spec IDs should chain only through specified specs

PROBLEM: 
When running 'chant work --chain spec1 spec2 spec3', the current behavior is:
1. Execute spec1
2. Then chain through ALL ready specs (ignoring spec2, spec3)

USER EXPECTATION:
Chain should execute ONLY the specified specs in the order provided:
1. Execute spec1
2. Then execute spec2
3. Then execute spec3
4. Stop (don't chain through other ready specs)

OBSERVED:
In wobble-typescript, running 'chant work --chain 039-sl6 03a-4ip 03b-cn3 03c-qyt 03d-kt0 03e-cl4' executes 039-sl6 then continues to work on other ready specs not in the list.

ROOT CAUSE:
src/main.rs:309 - only uses ids.first() as starting_spec_id
src/cmd/work.rs:1113-1152 - executes starting spec
src/cmd/work.rs:1154+ - chains through ALL ready specs (doesn't check if they were in original list)

SOLUTION OPTIONS:

Option A: Fail if IDs provided with --chain
- Error: '--chain cannot be used with specific spec IDs'
- Simple but less useful

Option B: Chain only through specified IDs (RECOMMENDED)
- If IDs provided, chain through ONLY those IDs in order
- If no IDs provided, chain through all ready specs (current behavior)
- Most intuitive for users

Option C: Add --chain-ids flag
- Keep --chain for all ready specs
- New flag --chain-ids for specific list
- More explicit but adds complexity

RECOMMENDED: Option B
- Intuitive behavior
- Backward compatible (no IDs = all ready specs)
- Follows principle of least surprise

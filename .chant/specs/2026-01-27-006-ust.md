---
type: code
status: in_progress
depends_on:
- 2026-01-27-005-o8j
target_files:
- src/cmd/spec.rs
---
# Implement required fields enforcement in chant lint

## Problem

Enterprise teams need to enforce policies that certain frontmatter fields must be present on all specs. Example: every spec must have `team`, `component`, and `jira_key` fields.

Current `chant lint` validates:
- Spec format
- Frontmatter parsing
- Valid status values

Need to add:
- Required field checking from `enterprise.required` config
- Clear error messages showing which specs are non-compliant

## Solution

Extend `chant lint` command in `src/cmd/spec.rs`:

```rust
pub fn lint_specs(config: &Config) -> Result<()> {
    let specs = load_all_specs()?;
    let mut errors = Vec::new();

    for spec in specs {
        // Existing lint checks...

        // Required fields check
        if !config.enterprise.required.is_empty() {
            for required_field in &config.enterprise.required {
                if !spec.has_frontmatter_field(required_field) {
                    errors.push(format!(
                        "{}: Missing required field '{}'",
                        spec.id, required_field
                    ));
                }
            }
        }
    }

    if !errors.is_empty() {
        eprintln!("Lint errors:\n{}", errors.join("\n"));
        eprintln!("\nEnterprise policy requires: {}",
            config.enterprise.required.join(", "));
        bail!("Lint failed");
    }

    println!("All specs valid");
    Ok(())
}
```

Add helper method to `Spec`:
```rust
impl Spec {
    pub fn has_frontmatter_field(&self, field: &str) -> bool;
}
```

## Acceptance Criteria

- [x] Add `has_frontmatter_field()` method to `Spec` struct
- [x] Extend `chant lint` to check required fields from enterprise config
- [x] Error message shows spec ID and missing field name
- [x] Summary shows enterprise policy (list of required fields)
- [x] Exit code 1 when required fields are missing
- [x] Exit code 0 when all required fields present
- [x] No-op when `enterprise.required` is empty
- [x] Add integration test: lint fails when required field missing
- [x] Add integration test: lint passes when all required fields present
- [x] Add integration test: lint skips check when no required fields configured
- [x] All tests pass
---
type: code
status: completed
labels:
- tests
- cleanup
- consolidation
target_files:
- tests/integration/workflow_test.rs
- tests/integration/config_test.rs
---
# Merge workflow_test.rs into config_test.rs

## Context

`tests/integration/workflow_test.rs` (334 LOC, 2 tests) tests enterprise derivation with missing/partial env vars. `tests/integration/config_test.rs` (1,164 LOC, 14+ tests) tests enterprise config including required fields, env-based derivation, path-based derivation, and regex validation. Both test the same enterprise derivation feature.

The two workflow tests are:
- `test_missing_env_var_graceful_failure` — creates enterprise config with env+path derivation, runs `chant add` without env vars, verifies only path derivation works
- `test_partial_env_vars_available` — same setup but sets one of two env vars, verifies partial derivation

These fit naturally alongside the existing env derivation tests in config_test.rs.

## Task

1. Move the two tests from `workflow_test.rs` into `config_test.rs` in the enterprise derivation section
2. Migrate them to use `TestHarness` (they currently use `common.rs` + manual `/tmp` paths)
3. Delete `workflow_test.rs`
4. Remove `workflow_test` from `tests/integration/mod.rs` if referenced there

## Acceptance Criteria

- [x] `tests/integration/workflow_test.rs` is deleted
- [x] Both tests exist in `config_test.rs` and pass
- [x] Tests use TestHarness instead of manual `/tmp` paths and `common.rs`
- [x] All existing tests pass
- [x] `cargo clippy` passes

## Output

Merged 2 tests from workflow_test.rs into config_test.rs using TestHarness. Deleted workflow_test.rs. All tests pass.

---
type: code
status: in_progress
---
# Improve spec quality linter to give actionable guidance for agents

The current linter output shows letter grades (A-D) but doesn't explain WHY or HOW to fix issues. Agents need concrete guidance to understand what makes a good spec.

## Current Output (unhelpful)

```
Quality Assessment:
  Complexity:    B
  Confidence:    C
  Splittability: C
  AC Quality:    D

Suggestions:
  • Add more specific details and improve organization
  • Consider breaking into more independent subsections
  • Rewrite acceptance criteria to be imperative, valuable, and testable
```

## Desired Output (actionable)

```
Quality Assessment:
  Complexity:    B - Moderate scope, may need 2-3 focused sessions
  Confidence:    C - Missing concrete file paths or implementation details
  Splittability: C - Contains multiple unrelated concerns
  AC Quality:    D - Criteria are vague or untestable

Why This Matters:
  Agents perform best with ISOLATED tasks that have TESTABLE acceptance criteria.
  Vague specs lead to scope creep, wrong assumptions, and wasted tokens.

How to Fix:

  Confidence (C → A):
    ✗ "Update the API"
    ✓ "In src/api/users.rs, add `get_user_by_email()` method"
    → Add specific file paths, function names, or line numbers

  Splittability (C → A):
    ✗ "Add auth and update docs and fix tests"
    ✓ Split into 3 specs: auth, docs, tests (use depends_on for ordering)
    → Each spec should do ONE thing

  AC Quality (D → A):
    ✗ "- [ ] Code works correctly"
    ✗ "- [ ] Tests pass"
    ✓ "- [ ] Add `validate_email()` fn in src/utils.rs returning bool"
    ✓ "- [ ] `cargo test test_validate_email` passes"
    → Criteria must be: imperative verb + specific location + verifiable outcome
```

## Implementation

In `src/score/` update the scoring modules to return explanations:

```rust
pub struct DimensionScore {
    pub grade: char,        // A, B, C, D
    pub score: f32,         // 0.0-1.0
    pub explanation: String, // "Missing concrete file paths"
    pub fix_hint: String,   // "Add specific file paths like src/foo.rs:42"
}
```

Update `src/cmd/work.rs` or wherever quality warnings are printed to show the enhanced output.

## Acceptance Criteria

- [x] Each dimension score includes a one-line explanation of the grade
- [x] Output includes "Why This Matters" section explaining isolated + testable
- [x] Output includes "How to Fix" with bad/good examples for each low grade
- [x] Examples use imperative verbs and specific paths (not generic advice)
- [x] `cargo test` passes
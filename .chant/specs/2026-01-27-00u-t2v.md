---
type: code
status: completed
target_files:
  - src/cmd/lifecycle.rs
  - src/merge_errors.rs
  - src/git.rs
  - docs/guides/recovery.md
model: claude-opus-4-5-20251101
---

# Add chant merge auto-detect for fast-forward conflicts

## Problem

Related to 00t-i78 but focuses on improving the merge command's conflict detection and resolution suggestions.

When `chant merge` encounters conflicts, error messages aren't actionable. Users don't know which recovery strategy to use.

**Current:**
```
Error: Merge failed
```

**Better:**
```
Error: Merge failed due to conflicts
Files with conflicts:
  - src/main.rs
  - src/lib.rs

Next steps:
  1. Resolve conflicts manually, then: git merge --continue
  2. Or try automatic rebase: chant merge spec-id --rebase --auto
  3. Or abort: git merge --abort
```

## Solution

Enhance merge error handling:

1. Detect conflict type (fast-forward, content conflicts, tree conflicts)
2. Provide specific recovery instructions
3. Show conflicting files
4. Suggest appropriate flags (--rebase, --no-ff, --auto)

## Acceptance Criteria

- [x] Detect merge conflict types
- [x] Show conflicting file list in error
- [x] Provide numbered recovery steps
- [x] Suggest appropriate chant merge flags
- [x] Add examples to error messages
- [x] Test with various conflict scenarios
- [x] Update documentation
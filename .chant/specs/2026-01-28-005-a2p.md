---
type: code
status: completed
commits:
- 7c15c7f
completed_at: 2026-01-28T13:27:30Z
model: opus
---
# Remove GitHub PR integration completely

## Problem

Chant currently has GitHub PR integration (`chant work --pr`) that creates GitHub pull requests for spec work. However:
- Spec is already the PR primitive (title, criteria, branch, commits, review)
- GitHub integration is external dependency that complicates workflow
- No customers yet, so no compatibility concerns
- Native approval workflow is cleaner and works offline
- Can add richer GitHub sync later (not just PR creation)

The GitHub PR feature should be completely removed, not deprecated.

## Solution

Remove all GitHub PR integration code:

1. **CLI flags** - Remove `--pr` flag from `chant work`
2. **GitHub API code** - Remove PR creation functions from `src/git.rs`
3. **Dependencies** - Remove GitHub API client dependencies if only used for PR
4. **Documentation** - Remove PR-related docs
5. **Tests** - Remove PR-related tests
6. **Update docs** - Emphasize spec-as-PR model

Files likely affected:
- `src/main.rs` - Remove --pr flag from work command
- `src/git.rs` - Remove create_pull_request and related functions
- `Cargo.toml` - Remove GitHub API dependencies if unused
- `docs/` - Remove PR documentation
- `tests/` - Remove PR tests

## Acceptance Criteria

- [x] Remove `--pr` flag from `chant work` command in CLI
- [x] Remove `create_pull_request` function from src/git.rs
- [x] Remove any GitHub API client code used only for PRs
- [x] Remove GitHub API dependencies from Cargo.toml (if only used for PRs)
- [x] Search codebase for "pull request" or "PR" references and remove
- [x] Remove PR-related documentation from docs/
- [x] Remove PR-related tests
- [x] Update documentation to emphasize spec-as-PR model
- [x] Verify no broken references to removed functionality
- [x] All tests passing
- [x] Code linted and formatted

## Agent Output

2026-01-28T13:27:30Z

```


I'll start by understanding the codebase structure and identifying all PR-related code that needs to be removed.
Excellent. I now have a comprehensive map of all PR-related code. Let me read the key files to understand the exact code to remove.
Let me read the key files in parallel to understand the full context before making changes.
Now let me find where Work and Replay commands are dispatched to see how `pr` is passed through.
Now let me find the Replay dispatch.
Good. Now let me read the files I need to modify. Let me read multiple in parallel.
Now let me read the rest of git.rs to see what other functions exist after the PR code, and also read the config, spec, and work files.
Now let me read the config.rs, spec.rs, work.rs, merge_driver.rs, mcp.rs and export.rs files for their PR-related sections.
Now let me read the remaining files that need changes.
Now let me read the spec.rs frontmatter area and the work.rs, merge_driver.rs, mcp.rs, and export.rs PR-related sections.
Now let me read the work.rs PR-related sections.
Now let me read the merge_driver.rs, mcp.rs, and export.rs PR sections.
Now let me find the replay command function to see how PR is used there.
Now let me check the test file for PR-related tests.
Now let me also check the docs.
Now let me check the docs/reference/cli.md and config.md for PR references.
Let me also check if there are any other files referencing the `git` module for PR functionality.
Good, `git::get_provider` is only used in `work.rs:745`. Let me also check if `push_branch` is only used for PR purposes.
`push_branch` is used only in the PR creation block in work.rs. Now let me check what other functions exist in git.rs beyond the PR code (to see if the whole file should be removed or just the PR parts).
Good. git.rs has plenty of non-PR functions (merge, rebase, branch operations). I only need to remove the PR-related parts (lines 1-158, the PR trait, providers, get_provider, create_pull_request, find_spec_branch) and the corresponding tests.

Let me also check if `find_spec_branch` is used anywhere else.
Only used in its own test. It's also `#[allow(dead_code)]` so it's unused. Let me also check if `GitConfig` and `GitProvider` are used anywhere beyond PR.
`GitConfig` and `GitProvider` are used in prompt.rs, merge.rs, config.rs, work.rs, and git.rs. They're only used for PR functionality. Since removing the whole `git` section from config would be a cleaner removal, let me check what happens if I remove `GitConfig` and `GitProvider` â€” I need to see how they're used in prompt.rs and merge.rs.
Good - `GitConfig` is used in test data construction in `prompt.rs` and `merge.rs`, plus in the `Config` struct in `config.rs`. Now let me see the Config struct.
Now I have a full picture. Let me also check the config merge function for `pr` and `git`:
Now let me also check the cmd/work.rs test for config construction:
I now have a thorough understanding of all PR-related code. Let me start making changes. I'll work through each file systematically.

First, let me start with the core source files. I'll make all the edits.

**Step 1: Remove --pr flags from main.rs (Work and Replay commands)**
Now remove the `--pr` from the Replay command:
Now update the Work dispatch to remove `pr`:
Now update the Replay dispatch:
**Step 2: Remove PR infrastructure from src/git.rs**

I need to remove lines 1-158 (the PR trait, providers, get_provider, create_pull_request, find_spec_branch) and the associated tests, while keeping the rest.
Now remove the PR-related tests from git.rs:
**Step 3: Remove GitProvider, GitConfig, and related code from src/config.rs**
Now remove the `git` field from the Config struct:
Now remove `GitConfig` struct:
Remove the `pr` field from `DefaultsConfig`:
Now remove `PartialGitConfig` and `git` from `PartialConfig`:
Remove `PartialGitConfig`:
Remove `pr` from `PartialDefaultsConfig`:
Now update the `merge_with` function to remove `git` and `pr`:
Now I also need to see the merge_with function's beginning to remove git-related variables:
Now remove the `pr` merge line and the `git` block:
Let me re-read the current state of the file to see what it looks like now:
I see - the `pr` field wasn't removed from `DefaultsConfig` yet (or it wasn't saved correctly). Wait, I already removed it from the struct definition. But in the `merge_with` function, it's still used. Let me remove the `pr` line and `git` block from `merge_with`:
Now I also need to check the `Config::parse` function and its default `impl Default for Config`:
Now remove the git-provider tests from config.rs:
I need to look at what test starts before the git provider tests:
Now let me check if there are any remaining references to `GitConfig` or `GitProvider` in config.rs:
Now let me also check if `fmt` is still used (since we removed the Display impl for GitProvider):
Good, `fmt` is still used by `RejectionAction`. Config.rs is done.
**Step 4: Remove PR field from src/spec.rs**
Remove `pr: None` from the Defa

... (output truncated, 18138 chars total)```

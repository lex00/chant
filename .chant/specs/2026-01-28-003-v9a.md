---
type: code
status: in_progress
model: claude-opus-4-5-20251101
---
# Activity command - git-based activity feed

## Problem

Users need to track all approval activity across specs without reading individual spec files. This includes:
- Who approved/rejected which specs
- When specs were created or worked
- Recent activity by person or spec
- Chronological activity feed

All this data is already in git - we just need to parse and present it.

## Solution

Implement `chant activity` command that parses git log to show chronological activity feed.

### Activity types (inferred from git commits):
- **spec_created** - Commit adds new spec file
- **spec_approved** - Commit modifies spec with approval
- **spec_rejected** - Commit modifies spec with rejection
- **spec_worked** - Commit message contains `chant(SPEC-ID):`
- **spec_completed** - Status changes to completed

### Filters:
- `--by <name>` - Show activity by specific person (git author)
- `--since <duration>` - Show activity since duration (e.g., "2h", "1d", "1w")
- `--spec <spec-id>` - Show activity for specific spec

### Output format:
```
2026-01-28 15:00  alice    APPROVED    001-cic   Approval system core
2026-01-28 14:30  bob      REJECTED    002-iwz   List filters (too broad)
2026-01-28 10:00  carol    CREATED     003-v9a   Activity command
2026-01-28 09:15  alice    WORKED      001-cic   Added approval frontmatter
```

### Implementation approach:
1. Run `git log --all --format="%H|%an|%at|%s" -- .chant/specs/`
2. For each commit, parse commit message and inspect changed files
3. Detect activity type based on:
   - New file → spec_created
   - Frontmatter change to approval.status: approved → spec_approved
   - Frontmatter change to approval.status: rejected → spec_rejected
   - Commit message matches `chant(SPEC-ID):` → spec_worked
   - Status change to completed → spec_completed
4. Sort chronologically and apply filters
5. Format and display

## Acceptance Criteria

- [x] Implement `chant activity` command
- [x] Parse git log for commits affecting .chant/specs/
- [x] Detect spec_created activity (new spec file)
- [x] Detect spec_approved activity (frontmatter approval.status: approved)
- [x] Detect spec_rejected activity (frontmatter approval.status: rejected)
- [x] Detect spec_worked activity (commit message contains `chant(SPEC-ID):`)
- [x] Detect spec_completed activity (status changes to completed)
- [x] Implement `--by <name>` filter
- [x] Implement `--since <duration>` filter with duration parsing
- [x] Implement `--spec <spec-id>` filter
- [x] Format output with timestamp, author, action, spec-id, description
- [x] Sort activities chronologically (most recent first)
- [x] Handle empty activity (no commits found)
- [x] All tests passing
- [x] Code linted and formatted
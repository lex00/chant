---
type: code
status: in_progress
target_files:
- src/main.rs
commit: '5126102'
completed_at: 2026-01-24T04:20:27Z
---
# Add --branch flag to create feature branches

When executing `chant work`, add a `--branch` flag that creates a git branch before invoking the agent.

## Acceptance Criteria

- [x] Add `--branch` flag to the `work` command
- [x] When `--branch` is passed, create a branch named `chant/{spec-id}` before invoking the agent
- [x] The branch should be created from the current HEAD
- [x] If branch already exists, switch to it instead of failing
- [x] Update the spec frontmatter with `branch: chant/{spec-id}` after creating/switching

## Implementation Notes

- Use `git checkout -b` to create branches
- Use `git checkout` to switch if branch exists
- Branch prefix should match config.defaults.branch_prefix (default: "chant/")
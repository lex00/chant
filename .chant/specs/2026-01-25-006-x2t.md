---
type: code
status: completed
target_files:
- src/main.rs
- src/spec.rs
completed_at: 2026-01-25T10:05:00+00:00
model: claude-haiku-4-5-20251001
---
# Organize archive with folder structure

## Problem

Currently all archived specs go into a flat `.chant/archive/` directory. As projects grow, this becomes unwieldy.

## Design Questions to Resolve

### 1. Is 1 folder per day enough?
Options:
- **Per day**: `.chant/archive/2026-01-25/` - Simple, matches spec ID prefix
- **Per month**: `.chant/archive/2026-01/` - Fewer folders, still organized
- **Per year**: `.chant/archive/2026/` - Minimal folders
- **Hybrid**: `.chant/archive/2026/01/25/` - Full hierarchy

Recommendation: Per day matches spec ID format (`2026-01-25-XXX`) and is granular enough without being excessive.

### 2. Should archive folder naming scheme be configurable?
Options:
- **Not configurable**: Simple, consistent across all projects
- **Configurable in .chant/config.toml**: Flexible but adds complexity

Recommendation: Start simple (not configurable), add config option later if requested.

### 3. What CLI commands need updating?

Commands that interact with archive:
- [ ] `chant archive` - Must create date folders when archiving
- [ ] `chant list` - May need to scan subfolders (if listing archived specs)
- [ ] `chant show` - Must find specs in date subfolders
- [ ] `chant work --force` - Must find archived specs to re-run

Internal functions:
- [ ] `load_all_specs()` / `load_archived_specs()` - Must recurse into subfolders
- [ ] `archive_spec()` - Must create date folder and move spec there

## Implementation

### Archive Structure
```
.chant/archive/
├── 2026-01-24/
│   ├── 2026-01-24-001-abc.md
│   ├── 2026-01-24-002-def.md
│   └── ...
├── 2026-01-25/
│   ├── 2026-01-25-001-xud.md
│   └── ...
```

### Migration
- Existing flat archive files should be migrated to date folders
- Add `chant archive --migrate` or auto-migrate on first run

## Acceptance Criteria

- [x] Archive creates date-based subfolders (YYYY-MM-DD)
- [x] `chant archive` creates folder if needed, moves spec to correct date folder
- [x] `chant list` (if showing archived) scans subfolders
- [x] `chant show` finds specs in archive subfolders
- [x] Existing flat archive files are migrated to date folders
- [x] All tests pass
---
type: docs
status: pending
target_files:
  - CLAUDE.md
  - README.md
---

# Document 00u-t2v: Enhanced merge error messages with conflict detection

## Problem

Spec 00u-t2v (Add chant merge auto-detect for fast-forward conflicts) implemented enhanced merge error messages, but these improvements are not documented:

**What was implemented**:
- Detect merge conflict types (fast-forward, content conflicts, tree conflicts)
- Show conflicting file list in error output
- Provide numbered recovery steps
- Suggest appropriate chant merge flags (--rebase, --auto)
- Add examples to error messages

**Current documentation**:
- CLAUDE.md mentions `--rebase` and `--auto` flags (line 119)
- But doesn't explain the enhanced error detection and helpful recovery messages
- Users won't know about the improved merge workflow

**Example of what users now see** (undocumented):
```
Error: Merge failed due to conflicts
Files with conflicts:
  - src/main.rs
  - src/lib.rs

Next steps:
  1. Resolve conflicts manually, then: git merge --continue
  2. Or try automatic rebase: chant merge spec-id --rebase --auto
  3. Or abort: git merge --abort
```

## Solution

Add documentation to CLAUDE.md under a new "Merge Conflict Resolution" section:

```markdown
### Merge Conflict Resolution

When `chant merge` encounters conflicts, it provides detailed diagnostics:

**Conflict Detection**:
- Automatically detects conflict type (fast-forward, content, tree)
- Lists all conflicting files
- Suggests recovery strategies specific to the conflict type

**Enhanced Error Messages**:
```
Error: Merge failed due to conflicts
Files with conflicts:
  - src/main.rs
  - tests/integration_tests.rs

Next steps:
  1. Resolve conflicts manually, then: git merge --continue
  2. Or try automatic rebase: chant merge 00x-v6m --rebase --auto
  3. Or abort: git merge --abort
```

**Recovery Options**:
- `--rebase`: Rebase branches onto main before merging (resolves fast-forward issues)
- `--auto`: Auto-resolve conflicts using AI agent (requires --rebase)
- Manual resolution: Fix conflicts, stage files, then `git merge --continue`
```

## Acceptance Criteria

- [ ] Add "Merge Conflict Resolution" section to CLAUDE.md
- [ ] Document conflict type detection
- [ ] Show example of enhanced error message
- [ ] Explain each recovery option (manual, --rebase, --auto)
- [ ] Add to "Key Principles" or "Best Practices" section
- [ ] Verify documentation is clear and actionable

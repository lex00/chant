---
type: code
status: pending
target_files:
- src/mcp.rs
- docs/reference/mcp.md
---

# Add chant_work_start MCP tool for async spec execution

## Context

Orchestrating agents need to start spec work asynchronously and monitor progress. Currently `chant work` blocks until completion, which doesn't work for MCP's request-response model.

## Implementation

Add `chant_work_start` tool that:
1. Spawns `chant work <id>` as a background process
2. Returns immediately with process info (PID, spec_id, started_at)
3. Stores process info in `.chant/processes/` for tracking

```json
{
  "name": "chant_work_start",
  "description": "Start working on a spec asynchronously (returns immediately)",
  "inputSchema": {
    "type": "object",
    "properties": {
      "id": { "type": "string", "description": "Spec ID" },
      "chain": { "type": "boolean", "description": "Continue to next ready spec after completion" },
      "parallel": { "type": "integer", "description": "Number of parallel workers (requires multiple ready specs)" }
    },
    "required": ["id"]
  }
}
```

**Response:**
```json
{
  "process_id": "abc123",
  "spec_id": "2026-02-02-001-xyz",
  "pid": 12345,
  "started_at": "2026-02-02T10:30:00Z",
  "mode": "single|chain|parallel"
}
```

## Acceptance Criteria

- [ ] `chant_work_start` tool added to MCP server
- [ ] Spawns background process correctly
- [ ] Returns process tracking info
- [ ] Process info stored in `.chant/processes/`
- [ ] Supports `chain` and `parallel` options
- [ ] Documentation updated in mcp.md
- [ ] Tests added

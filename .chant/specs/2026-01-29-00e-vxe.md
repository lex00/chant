---
type: code
status: in_progress
target_files:
- src/main.rs
model: claude-opus-4-5-20251101
---
# Fix .gitignore template to include store/ directory

## Problem

The `.chant/.gitignore` template in `src/main.rs:1201` only includes `.store/` (with dot) but not `store/` (without dot). However, the agent rotation code writes to `.chant/store/rotation.json` (src/cmd/agent_rotation.rs:17).

This creates a mismatch where:
- **This repo**: Works fine because root `.gitignore` has `.chant/store/`
- **New installations**: `store/` directory is NOT ignored, so `rotation.json` could be accidentally committed

**Current template (src/main.rs:1201):**
```
# Local state (not shared)
.locks/
.store/    ← only this one
logs/
```

**Agent rotation writes to:**
```rust
// src/cmd/agent_rotation.rs:17
fn rotation_state_path() -> PathBuf {
    PathBuf::from(".chant/store/rotation.json")  // ← no dot!
}
```

## Solution

Add `store/` (without dot) to the default `.chant/.gitignore` template so both directories are ignored in new installations:

```
# Local state (not shared)
.locks/
.store/
store/     ← add this
logs/
```

This ensures `rotation.json` and any other files written to `.chant/store/` are properly gitignored.

## Acceptance Criteria

- [x] Update `.gitignore` template in `src/main.rs` to include `store/` line
- [x] Verify template now includes both `.store/` and `store/`
- [x] Run `cargo fmt` and `cargo clippy`
- [x] All tests pass
- [x] Test by running `chant init --force` and verifying new `.chant/.gitignore` has both entries
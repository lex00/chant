---
type: code
status: completed
target_files:
- src/main.rs
- src/spec.rs
commits:
  - 95f567b
completed_at: 2026-01-24T12:16:33Z
---
# Add --pr flag to create pull requests via gh CLI

When executing `chant work`, add a `--pr` flag that creates a GitHub pull request after the spec completes successfully.

## Acceptance Criteria

- [x] Add `--pr` flag to the `work` command
- [x] When `--pr` is passed and spec completes successfully, create a PR using `gh pr create`
- [x] The PR title should be the spec title
- [x] The PR body should include the spec description
- [x] Update the spec frontmatter with `pr: <pr-url>` after creating the PR
- [x] If `--pr` is used, `--branch` should be implied (can't create PR without a branch)

## Implementation Notes

- Use `gh pr create --title "..." --body "..."` to create PRs
- The branch must be pushed to remote before creating PR
- Use `git push -u origin <branch>` to push the branch
- Capture the PR URL from gh output

## Agent Output

2026-01-24T12:16:33Z

```
The spec implementation is complete. Here's a summary of what was verified:

**Implementation Summary:**

The `--pr` flag for `chant work` was already fully implemented in the codebase. I verified each acceptance criterion:

1. **`--pr` flag added** - Present in `src/main.rs:61-63` as a boolean flag on the Work command
2. **PR creation on success** - Implemented in `src/main.rs:611-629` using the git provider abstraction
3. **PR title uses spec title** - `src/main.rs:624`: `spec.title.clone().unwrap_or_else(|| spec.id.clone())`
4. **PR body includes spec description** - `src/main.rs:625`: `spec.body.clone()`
5. **Frontmatter updated with PR URL** - `src/main.rs:628`: `spec.frontmatter.pr = Some(pr_url.clone())`
6. **`--pr` implies `--branch`** - `src/main.rs:525`: `let create_branch = cli_branch || config.defaults.branch || create_pr`

All tests pass and the CLI help correctly shows the `--pr` flag. Committed with `chant(2026-01-24-002-u0g): Check off acceptance criteria for --pr flag`.```

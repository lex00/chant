---
type: code
status: completed
model: claude-opus-4-5-20251101
target_files:
- src/cmd/git_ops.rs
- src/cmd/work.rs
- src/cmd/mod.rs
---
# Extract Git Operations Module

Create `src/cmd/git_ops.rs` containing git-related helper functions that are used by both single and parallel execution modes.

### Acceptance Criteria

- [x] `src/cmd/git_ops.rs` created with the following functions:
  - `create_or_switch_branch(branch_name: &str) -> Result<()>`
  - `push_branch(branch_name: &str) -> Result<()>`
  - `commit_transcript(spec_id: &str, spec_path: &Path) -> Result<()>`
- [x] All three functions moved intact with their implementations (~95 lines)
- [x] Functions remain public and callable from `work.rs`
- [x] `src/cmd/work.rs` updated to import these functions: `use crate::cmd::git_ops::{create_or_switch_branch, push_branch, commit_transcript};`
- [x] `src/cmd/mod.rs` updated to include `pub mod git_ops;`
- [x] All usages of these functions in `work.rs` work correctly after import
- [x] `just check` passes (no compilation errors, linting, or test failures)

### Edge Cases

- Function `commit_transcript` gracefully handles case where "nothing to commit" or "no changes added" (should return `Ok(())` not error)
- Git commands may fail due to missing remote origin or permission issues - errors must propagate with clear messages
- Branch creation may fail if branch already exists, but switching should succeed on next attempt

### Example Test Cases

For this extraction, verify:
- `create_or_switch_branch` called with valid branch name succeeds
- `push_branch` called with valid branch name and remote succeeds
- `commit_transcript` with no changes to commit returns `Ok(())` without error
- Error messages from git commands are properly captured and returned

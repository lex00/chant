---
type: code
status: completed
target_files:
- .chant/prompts/standard.md
model: claude-haiku-4-5-20251001
---
# Enhance standard prompt to create specs for out-of-scope issues

## Problem

When agents notice problems outside the scope of their current assignment, they should:
1. Create a new spec to address the issue (`just chant add "description"`)
2. NOT create duplicate specs for the same issue
3. Continue with their original task

Currently the standard prompt doesn't guide this behavior.

## Solution

Update `.chant/prompts/standard.md` to include:

### 1. Out-of-scope issue handling
```markdown
## When You Notice Issues Outside Your Scope

If you encounter a problem that is NOT part of your current spec:
1. Check if a spec already exists for this issue: `just chant list | grep -i "keyword"`
2. If no existing spec, create one: `just chant add "Brief description of the issue"`
3. Note in your output that you created a new spec
4. Continue with your original assignment - do NOT fix the out-of-scope issue
```

### 2. Duplicate prevention
```markdown
## Avoiding Duplicate Specs

Before creating a new spec:
- Search existing specs: `just chant list`
- Search archived specs: `ls .chant/archive/`
- If similar spec exists, do NOT create a duplicate
```

## Acceptance Criteria

- [x] Standard prompt includes guidance on out-of-scope issue handling
- [x] Standard prompt includes duplicate spec prevention
- [x] Instructions use `just chant add` (not direct binary)
- [x] Agent is told to continue original task after creating spec
- [x] Clear examples provided
---
type: code
status: pending
depends_on:
- 2026-01-30-00e-y44.4
target_files:
- src/score/splittability.rs
---
# Splittability Scoring Implementation

Implement scoring to determine if a spec can be effectively decomposed.

### Acceptance Criteria

- [ ] Implement `calculate_splittability(spec: &Spec) -> SplittabilityGrade` function
- [ ] Grade A: Clear subsections (3+ headers), multiple target files (3+), independent tasks
- [ ] Grade B: Some structure (1-2 headers), 2 target files
- [ ] Grade C: Single concern, 1 target file, minimal structure
- [ ] Grade D: Tightly coupled indicators (many cross-references, shared state mentioned)
- [ ] Detect subsections by counting markdown headers in body

### Edge Cases

- Specs already part of a group (has parent_id) should be Grade C (already split)
- Specs with 1 criterion should be Grade C (atomic)
- Detection of coupling keywords: "shared", "depends on each other", "tightly coupled"

### Example Test Cases

- Spec with 4 headers, 5 files, 8 criteria → Grade A
- Spec with 1 header, 2 files, 3 criteria → Grade B
- Spec with 0 headers, 1 file, 1 criterion → Grade C
- Spec mentioning "tightly coupled components" → Grade D

### Provides

- `calculate_splittability(spec: &Spec) -> SplittabilityGrade` - Returns grade based on decomposability
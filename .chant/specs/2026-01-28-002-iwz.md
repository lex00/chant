---
type: code
status: in_progress
model: claude-opus-4-5
---
# List filters and visual indicators for approval and activity

## Problem

With approval workflow, users need to:
- Filter specs by approval status
- See who created/approved specs
- Track recent activity and discussion
- Get quick visual feedback on spec state

The existing `chant list` command needs filters and visual enhancements to support approval workflow visibility.

## Solution

Extend `chant list` with:

1. **Filters**
   - `--approval <status>` - Filter by approval status (pending/approved/rejected)
   - `--created-by <name>` - Filter by spec creator
   - `--activity-since <duration>` - Filter by recent activity (e.g., "2h", "1d")
   - `--mentions <name>` - Filter specs mentioning a person in approval discussion

2. **Count flag**
   - `--count` - Show only count of matching specs

3. **Visual indicators** (append to each line)
   - `ğŸ‘¤ name` - Created by (from git log of spec file creation)
   - `â†© 2h` - Last activity timestamp (relative time from git log)
   - `ğŸ’¬ 3` - Comment count in approval discussion
   - `âœ“ name` - Approved by (from approval.by frontmatter)

4. **Status markers** (inline with spec ID)
   - `[needs approval]` - approval.required: true, status: pending
   - `[rejected]` - approval.status: rejected
   - `[approved]` - approval.status: approved

Example output:
```
â—‹ 001 Fix auth bug                           ğŸ‘¤ alice â†© 2h
âš  002 Refactor                              [rejected] ğŸ‘¤ bob ğŸ’¬ 5 â†© 1h
â— 003 Add tests                              âœ“ carol
```

Symbol guide (existing):
```
â—‹ pending    â— completed    â— in_progress    âœ— failed    âŠ˜ blocked    âŠ— cancelled
```

## Acceptance Criteria

- [x] Implement `--approval <status>` filter (pending/approved/rejected)
- [x] Implement `--created-by <name>` filter
- [x] Implement `--activity-since <duration>` filter with duration parsing (e.g., "2h", "1d", "1w")
- [x] Implement `--mentions <name>` filter (search approval discussion)
- [x] Implement `--count` flag to show only count
- [x] Add visual indicator: `ğŸ‘¤ name` (created by from git log)
- [x] Add visual indicator: `â†© 2h` (last activity relative time from git log)
- [x] Add visual indicator: `ğŸ’¬ 3` (comment count from approval discussion)
- [x] Add visual indicator: `âœ“ name` (approved by from frontmatter)
- [x] Add status marker: `[needs approval]` for pending approval
- [x] Add status marker: `[rejected]` for rejected approval
- [x] Add status marker: `[approved]` for approved approval
- [x] Parse git log to extract creator and activity timestamps
- [x] Parse approval discussion section to count comments
- [x] All tests passing
- [x] Code linted and formatted
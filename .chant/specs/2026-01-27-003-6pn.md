---
type: code
status: pending
labels:
  - multi-repo
  - v0.4.0
depends_on:
  - 2026-01-27-002-8nc
target_files:
  - src/main.rs
  - src/cmd/list.rs
---

# Add list --repo flag to filter specs by repository

Add `--repo` flag to `chant list` command to filter specs from a specific repository when using global multi-repo mode.

## Context

With global config supporting multiple repos, users need to filter specs by repository:

```bash
chant list --global              # All repos
chant list --global --repo backend   # Only backend repo
chant list --repo frontend       # Only frontend repo (implies --global)
```

## Design

### CLI Interface

```
chant list [OPTIONS]

Options:
  --global            List specs from all configured repos
  --repo <NAME>       Filter to specific repo (implies --global)
  --project <NAME>    Filter to specific project within repo
  ...existing options...
```

### Behavior

1. Without `--global` or `--repo`: List specs in current directory's repo only (existing behavior)
2. With `--global`: Aggregate specs from all repos in global config
3. With `--repo NAME`: Filter to just that repo (automatically enables global mode)
4. With `--repo NAME --project PROJ`: Filter to project within repo

### Output Format

When showing global/multi-repo results, prefix spec IDs with repo name:

```
$ chant list --global
○ backend:2026-01-27-001-abc  Add API endpoint
○ frontend:2026-01-27-002-xyz Add login form
● shared:2026-01-27-001-def   Add types (completed)
```

## Acceptance Criteria

- [ ] `--global` flag lists specs from all repos in global config
- [ ] `--repo <NAME>` flag filters to specific repository
- [ ] `--repo` implies `--global` (no need to specify both)
- [ ] Spec IDs prefixed with repo name in global mode
- [ ] `--project` filter works with `--repo`
- [ ] Error when `--repo` name not found in global config
- [ ] Graceful handling when a configured repo path doesn't exist
- [ ] All existing list filters work with `--global` (--status, --label, --type)
- [ ] Tests cover global and repo-filtered listing
- [ ] `just lint` passes with no warnings

## Notes

- Performance consideration: Loading specs from multiple repos may be slow
- Consider adding `--repo` to other commands (show, search, status) in future specs

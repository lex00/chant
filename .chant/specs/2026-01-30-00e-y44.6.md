---
type: code
status: pending
depends_on:
- 2026-01-30-00e-y44.5
target_files:
- src/score/isolation.rs
---
# Isolation Scoring Implementation

Implement scoring for group specs to measure member independence.

### Inherited Context

- Only applies to group specs with members
- Good isolation: dependencies in depends_on, minimal shared files
- Bad isolation: cross-references in body text, many shared files

### Acceptance Criteria

- [ ] Implement `calculate_isolation(spec: &Spec) -> Option<IsolationGrade>` function
- [ ] Return None for non-group specs or groups without members
- [ ] Count members with body cross-references (mentions of "Member X" in body text)
- [ ] Calculate isolation percentage: (members without cross-refs) / total * 100
- [ ] Grade A: >90% isolation, minimal shared files (<20% overlap)
- [ ] Grade B: >70% isolation
- [ ] Grade C: >50% isolation
- [ ] Grade D: ≤50% isolation OR >50% file overlap

### Edge Cases

- Groups with 1 member should return Grade A (trivially isolated)
- Detect "Member N" patterns in member body text
- Calculate file overlap: files appearing in multiple members' target_files

### Example Test Cases

- Group with 5 members, 0 cross-references, no shared files → Grade A
- Group with 6 members, 2 with cross-refs, 1 shared file → Grade B (67% isolation)
- Group with 4 members, 3 with cross-refs → Grade D (25% isolation)

### Provides

- `calculate_isolation(spec: &Spec) -> Option<IsolationGrade>` - Returns grade for groups, None for non-groups
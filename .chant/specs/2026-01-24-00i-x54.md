---
type: code
status: in_progress
target_files:
- src/main.rs
---
# Ensure git hash is in frontmatter after completion

The commit hash should always be recorded in the spec frontmatter after completion.

## Acceptance Criteria

- [x] After agent completion, get the commit hash from git log
- [x] The `get_latest_commit_for_spec` function should work reliably
- [x] If no commit found with spec ID pattern, try getting HEAD commit
- [x] Log warning if no commit can be found

## Implementation Notes

- Current implementation looks for `chant(spec-id)` in commit messages
- Fallback: if not found, check if HEAD commit was made after work started
- Store the short hash (7 chars) in `spec.frontmatter.commit`
---
type: code
status: in_progress
target_files:
- .github/workflows/release.yml
model: claude-haiku-4-5-20251001
---
# Fix Windows binary double .exe extension in release workflow

## Problem

Windows release artifact is named `chant-windows-x86_64.exe.exe` (double extension).

**Root cause:** `asset_name` already includes `.exe` but the workflow appends another:

```yaml
# Line 34: asset_name already has .exe
asset_name: chant-windows-x86_64.exe

# Line 67: adds ANOTHER .exe
cp target/${{ matrix.target }}/release/chant.exe ${{ matrix.asset_name }}.exe

# Line 78: same issue
gh release upload ${{ github.ref_name }} ${{ matrix.asset_name }}.exe
```

## Fix

Remove the extra `.exe` suffix in the Windows-specific branches. Use `${{ matrix.asset_name }}` directly since it already contains the correct extension.

**Lines 66-70:**
```yaml
run: |
  if [ "${{ matrix.os }}" = "windows-latest" ]; then
    cp target/${{ matrix.target }}/release/chant.exe ${{ matrix.asset_name }}
  else
    cp target/${{ matrix.target }}/release/chant ${{ matrix.asset_name }}
  fi
```

**Lines 77-81:**
```yaml
run: |
  if [ "${{ matrix.os }}" = "windows-latest" ]; then
    gh release upload ${{ github.ref_name }} ${{ matrix.asset_name }}
  else
    gh release upload ${{ github.ref_name }} ${{ matrix.asset_name }}
  fi
```

Or simplify since both branches now do the same thing:
```yaml
run: |
  cp target/${{ matrix.target }}/release/${{ matrix.bin_name }} ${{ matrix.asset_name }}

run: |
  gh release upload ${{ github.ref_name }} ${{ matrix.asset_name }}
```

## Acceptance Criteria

- [x] Fix double `.exe` extension in Windows artifact
- [x] Simplify workflow by removing unnecessary OS conditionals
- [x] Result: `chant-windows-x86_64.exe` (single extension)
---
type: code
status: completed
target_files:
- src/main.rs
commits:
- aac2814
completed_at: 2026-01-30T07:45:39Z
model: opus
---
# Fix clippy too_many_arguments error in cmd_init

## Problem

CI is failing with clippy error:
```
error: this function has too many arguments (8/7)
   --> src/main.rs:1191:1
fn cmd_init(subcommand, name, silent, force, minimal, agents, provider, model)
```

The `cmd_init` function has 8 parameters after adding `--provider` and `--model`, but clippy's limit is 7.

## Solution

Add `#[allow(clippy::too_many_arguments)]` attribute to the function at line 1190.

```rust
#[allow(clippy::too_many_arguments)]
fn cmd_init(
    subcommand: Option<&str>,
    name: Option<String>,
    silent: bool,
    force: bool,
    minimal: bool,
    agents: Vec<String>,
    provider: Option<String>,
    model: Option<String>,
) -> Result<()> {
    // ...
}
```

## Acceptance Criteria

- [x] Add `#[allow(clippy::too_many_arguments)]` before `cmd_init` function
- [x] `cargo clippy -- -D warnings` passes
- [x] All tests pass

## Agent Output

2026-01-30T07:45:39Z

```
I'll implement this fix for the clippy `too_many_arguments` error. Let me start by reading the relevant code.
I can see the `cmd_init` function starting at line 1191. I need to add the `#[allow(clippy::too_many_arguments)]` attribute before it.
Now let me run cargo fmt and then cargo clippy to verify the fix.
Clippy passes. Now let me run the tests.
Let me check the end of the test output to confirm all tests passed.
All tests pass. Now let me update the spec file to check off the acceptance criteria.
Now I need to add the model to the frontmatter since all acceptance criteria are met.
Now let me commit the changes.
I see there are other modified spec files. Let me only stage the files related to this spec (src/main.rs and the spec file).
Done. The spec has been completed successfully:

1. Added `#[allow(clippy::too_many_arguments)]` attribute before the `cmd_init` function at line 1191 in `src/main.rs`
2. Verified `cargo clippy -- -D warnings` passes with no errors
3. All tests pass (312 unit tests + 61 integration tests + 1 doc test)
4. Checked off all acceptance criteria in the spec file
5. Added model to spec frontmatter
6. Committed changes with message: `chant(2026-01-30-001-vhp): Fix clippy too_many_arguments error in cmd_init`

The remaining modified files (`.chant/specs/2026-01-29-00h-ast.md` and `.chant/specs/2026-01-29-00j-74x.md`) are unrelated to this spec and were not touched by my changes.```

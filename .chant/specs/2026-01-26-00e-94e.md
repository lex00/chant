---
type: code
status: completed
labels:
- new-command
model: haiku
completed_at: 2026-01-26T19:12:59Z
target_files:
  - src/cmd/lifecycle.rs
  - src/main.rs
---

# Add chant drift command for detecting when documentation and research specs have stale inputs - checks if tracks, origin, or informed_by files changed since spec completion

## Problem

Documentation and research specs track important inputs (source code files, data files, research materials) that may be modified after the spec is completed. When these inputs change, the spec's analysis or documentation becomes stale and should be re-run.

Need a `chant drift` command that:
1. Detects completed specs with `tracks`, `origin`, or `informed_by` fields
2. Checks if any referenced files were modified after spec completion
3. Reports which specs have drifted (stale inputs)
4. Recommends re-running the spec to refresh analysis/documentation

## Acceptance Criteria

- [x] `chant drift` command implemented in cmd/lifecycle.rs
- [x] Detects completed specs with tracks/origin/informed_by fields
- [x] Compares file modification timestamps to spec completion time
- [x] Supports glob patterns in file specifications (e.g., src/**/*.rs)
- [x] Handles literal file paths as well as glob patterns
- [x] Displays drifted specs with file paths and modification dates
- [x] Displays up-to-date specs for reference
- [x] Handles optional spec ID filter (chant drift <id> or chant drift for all)
- [x] Integration with main.rs CLI subcommand structure
- [x] All tests pass
- [x] Code formatted with cargo fmt
- [x] No clippy warnings or errors

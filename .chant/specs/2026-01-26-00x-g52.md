---
type: code
status: completed
model: opus
target_files:
  - src/cmd/work.rs
  - src/cmd/spec.rs
---

# Fix branch prefix mismatch: parallel work uses spec/ but merge expects chant/ from config

## Problem

When running parallel work (`chant work --parallel`), branches were being created with a hardcoded `spec/` prefix instead of using the configured `branch_prefix` (default: `chant/`). This caused `chant merge` to fail because it looks for branches matching the config prefix.

## Solution

Updated `src/cmd/work.rs` to use `config.defaults.branch_prefix` instead of hardcoded `"spec/"` when parallel execution forces branch mode.

## Changes

1. Line 650: Changed `"spec/".to_string()` to `config.defaults.branch_prefix.clone()`
2. Line 656: Updated dead code path for consistency
3. Updated test in spec.rs to expect `chant/` prefix

## Acceptance Criteria

- [x] Parallel work creates branches with config prefix (default: `chant/`)
- [x] Merge command finds branches created by parallel work
- [x] All tests pass
- [x] Code builds without errors

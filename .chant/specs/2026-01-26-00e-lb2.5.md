---
type: code
status: pending
depends_on:
- 2026-01-26-00e-lb2.4
target_files:
- src/main.rs
- src/prompt.rs
---
# Implement agent invocation for verification with dry-run support

Implement the agent invocation logic that sends the spec body and acceptance criteria to the verify prompt. Parse the agent's response to extract PASS/FAIL/SKIP status for each criterion. Support `--dry-run` to show what would be verified without invoking the agent.

### Acceptance Criteria

- [ ] Agent invoked with verify prompt, spec body, and acceptance criteria as context
- [ ] Agent response parsed to extract verification result (PASS/FAIL/PARTIAL)
- [ ] Individual criterion results (PASS/FAIL/SKIP) extracted from response
- [ ] `--dry-run` flag prints specs that would be verified without invoking agent
- [ ] Error handling for agent API failures or unexpected response formats

### Edge Cases

- Agent returns malformed response: Should display error and mark verification as FAILED
- Agent response missing some criteria: Should mark missing ones as SKIP
- Agent times out or returns error: Should fail verification gracefully with clear message
- Spec has no acceptance criteria section: Should skip verification with warning

### Example Test Cases

For this feature, verify:
- Agent receives correct prompt with spec context
- Response with all PASS criteria marks spec as PASSED
- Response with any FAIL criteria marks spec as FAILED
- `--dry-run` prints spec IDs but doesn't invoke agent
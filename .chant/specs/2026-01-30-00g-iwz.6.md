---
type: code
status: in_progress
depends_on:
- 2026-01-30-00g-iwz.1
- 2026-01-30-00g-iwz.2
- 2026-01-30-00g-iwz.3
- 2026-01-30-00g-iwz.4
- 2026-01-30-00g-iwz.5
target_files:
- src/cli.rs
- src/main.rs
- src/status.rs
---
# CLI Integration

Wire all formatters and watch mode into the `chant status` command with flags `--brief`, `--json`, `--watch`. Ensure flags compose correctly and default to regular output.

### Inherited Context

- Follow existing CLI flag patterns (clap or structopt)
- Default behavior (no flags) should show regular output
- Flags should be mutually exclusive where appropriate

### Acceptance Criteria

- [x] `--brief` flag outputs single-line summary
- [x] `--json` flag outputs JSON
- [x] `--watch` flag enables live refresh (works with --brief and --json)
- [x] No flags defaults to regular multi-section output
- [x] `--brief` and `--json` are mutually exclusive (error if both)

### Edge Cases

- Both `--brief` and `--json` specified: Exit with error message
- Invalid flag combinations: Show usage help
- Watch mode with invalid output flag: Exit with error before starting watch loop

### Example Test Cases

- `chant status`: Regular output
- `chant status --brief`: Single line
- `chant status --json`: JSON output
- `chant status --watch --brief`: Single line refreshing every 5s
- `chant status --brief --json`: Error with usage message
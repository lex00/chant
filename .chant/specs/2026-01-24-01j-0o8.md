---
type: code
status: completed
target_files:
- src/spec.rs
model: claude-haiku-4-5-20251001
---
# Fix spec validator - only count checkboxes in Acceptance Criteria section

## Bug

The `count_unchecked_checkboxes()` function counts ALL `- [ ]` patterns in the spec body, including those inside code blocks and examples. This causes false positives.

## Example

```markdown
## Expected Format

```markdown
## Acceptance Criteria

- [ ] Example checkbox in code block
```

## Acceptance Criteria

- [x] Real checkbox
```

Current behavior: Reports 1 unchecked (the one in the code block)
Expected behavior: Reports 0 unchecked (only counts real section)

## Fix

Only count checkboxes that appear AFTER `## Acceptance Criteria` heading and BEFORE the next `##` heading or end of file. Skip content inside code fences.

## Acceptance Criteria

- [x] Parse spec body to find `## Acceptance Criteria` section
- [x] Only count checkboxes within that section
- [x] Skip checkboxes inside code fences (``` blocks)
- [x] Add test with code block containing checkbox
- [x] All tests pass
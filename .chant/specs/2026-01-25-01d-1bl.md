---
type: code
status: completed
model: claude-opus-4-5-20251101
target_files:
- src/prompt.rs
- .chant/prompts/standard.md
---
# Add spec.path template variable for checking off acceptance criteria

## Problem

The standard prompt tells agents to "check off each acceptance criterion in the spec file" but doesn't provide the spec file path. Agents must guess the path is `.chant/specs/{{spec.id}}.md`.

Available variables:
- `{{spec.id}}` ✓
- `{{spec.title}}` ✓
- `{{spec.description}}` ✓
- `{{spec.path}}` ❌ MISSING

This may explain why agents sometimes complete work but leave criteria unchecked.

## Solution

1. Add `{{spec.path}}` variable to `prompt.rs` substitution
2. Update `standard.md` to explicitly reference the spec file path

## Acceptance Criteria

- [x] Add `{{spec.path}}` substitution in `src/prompt.rs`
- [x] Update step 8 in `standard.md` to say: "Edit `{{spec.path}}` to check off criteria"
- [x] Add test for `{{spec.path}}` substitution
- [x] All existing tests pass
- [x] `just check` passes

## Implementation

In `src/prompt.rs` `substitute()` function, add:
```rust
result = result.replace("{{spec.path}}", &spec.path.display().to_string());
```

In `.chant/prompts/standard.md`, update step 8:
```markdown
8. **Check off** each acceptance criterion in `{{spec.path}}` by changing `- [ ]` to `- [x]`
```
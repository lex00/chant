---
type: code
status: completed
target_files:
- .chant/prompts/release.md
commits:
- 5d84103
completed_at: 2026-02-01T12:46:25Z
model: sonnet
---
# Design release prompt

Create a prompt that guides agents through the complete release workflow using chant commands.

## Workflow Steps

The release prompt should orchestrate these steps in order:

### 1. Pre-release Validation
- Run `chant status` to check project state
- Ensure no specs are in_progress or failed
- List any pending specs that should be addressed first

### 2. Finalize Completed Work
- Run `chant finalize` on any completed specs missing finalization
- Validate all acceptance criteria are checked

### 3. Merge Feature Branches
- Run `chant merge --all` to merge completed spec branches
- Handle merge conflicts if any arise
- Ensure main branch is clean after merges

### 4. Cleanup
- Run `chant archive` on completed specs
- Run `chant cleanup` to remove stale worktrees
- Commit archive changes

### 5. Git Status Cleanup
- Ensure on main branch
- Commit any uncommitted changes (spec archives, etc.)
- Push to origin

### 6. Cut Release
- Bump version in Cargo.toml (prompt for major/minor/patch)
- Update Cargo.lock
- Update CHANGELOG.md with release notes
- Commit version bump
- Create and push git tag
- Create GitHub release

### 7. Update Release Notes
- Generate release notes from:
  - Commits since last release
  - Completed specs in this release
  - CHANGELOG.md content
- Update GitHub release with detailed notes

### 8. Monitor CI
- Watch CI workflows until completion
- Report success/failure status
- Retry release workflow if it fails

## Acceptance Criteria

- [x] Create `.chant/prompts/release.md` with complete workflow
- [x] Prompt uses chant commands (status, finalize, merge, archive, cleanup)
- [x] Prompt uses git commands for version bump and tagging
- [x] Prompt uses gh CLI for release creation and notes
- [x] Prompt includes error handling and recovery steps
- [x] Prompt can be invoked via `chant work <spec> --prompt release`

## Template Variables

The prompt should accept these variables:
- `{{version_bump}}` - major, minor, or patch
- `{{skip_ci_wait}}` - skip waiting for CI completion

## Example Usage

```bash
# Standard release
chant work <spec> --prompt release

# Quick release without CI wait
chant work <spec> --prompt release  # with skip_ci_wait context
```

## Agent Output

2026-02-01T12:46:25Z

```
I'll implement the release prompt for the chant workflow. Let me start by exploring the existing prompt structure and then create the release prompt.
## Summary

Created `.chant/prompts/release.md` orchestrating the complete release workflow.

- 10-step process: validation, finalization, merging, archival, version bump, tagging, GitHub release, CI monitoring
- Uses chant commands: `status`, `finalize`, `merge --all`, `archive`, `cleanup`
- Uses git commands for version management and tagging
- Uses `gh` CLI for GitHub release creation
- Includes error handling sections for common issues (merge conflicts, CI failures, authentication)
- Includes recovery steps for aborting or correcting releases
- Follows output-concise style with quiet narration and structured final summary```

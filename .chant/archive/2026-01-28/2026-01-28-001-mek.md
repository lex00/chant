---
type: docs
status: completed
target_files:
- docs/reference/cli.md
- docs/guides/recovery.md
commits:
- b1fb646
completed_at: 2026-01-28T00:03:23Z
model: opus
---
# Update documentation: Add --all-completed flag to merge command docs

## Problem

The `--all-completed` flag for `chant merge` was implemented in spec 00x-v6m but is not documented in the reference documentation.

**Current state**:
- ✅ Feature implemented in `src/cmd/lifecycle.rs`
- ✅ CLI flag added to `src/main.rs`
- ✅ Works: `chant merge --all-completed --dry-run` returns results
- ✅ Help text shows flag: `chant merge --help | grep all-completed`
- ❌ Not in `docs/reference/cli.md` under Merge section
- ❌ Not in any guides or examples

**User impact**:
Users reading the documentation won't know about this convenient post-parallel workflow flag.

## Solution

Update `docs/reference/cli.md` to document the `--all-completed` flag:

### 1. Add to basic examples (around line 786):
```markdown
chant merge --all                     # Merge all completed spec branches
chant merge --all-completed           # Merge completed specs with branches (post-parallel convenience)
chant merge --all --dry-run           # Preview what would be merged
```

### 2. Add dedicated subsection after "Interactive Wizard":
```markdown
### Post-Parallel Convenience: `--all-completed`

After running `chant work --parallel`, use `--all-completed` as a convenience to merge all specs that:
1. Have `status: completed`
2. Have an associated branch (e.g., `chant/spec-id`)

This is equivalent to `--all` but filters to only specs with branches, making it perfect for post-parallel workflows:

```bash
# After parallel execution
chant work --parallel --max 5

# Merge all completed specs with branches
chant merge --all-completed --delete-branch --yes
```

**vs `--all`:**
- `--all`: Merges all completed spec branches (may include specs completed without branches)
- `--all-completed`: Only merges completed specs that have branches (post-parallel use case)
```

### 3. Update examples in guides/recovery.md if needed

Add mention of `--all-completed` in recovery scenarios after parallel execution.

## Acceptance Criteria

- [x] Add `--all-completed` to basic examples in cli.md
- [x] Add "Post-Parallel Convenience" subsection explaining the flag
- [x] Explain difference between `--all` and `--all-completed`
- [x] Show post-parallel workflow example
- [x] Check if guides/recovery.md needs update
- [x] Verify documentation is clear and accurate

## Agent Output

2026-01-28T00:03:23Z

```
Let me also check the recovery.md file and look at the implementation to understand the flag better.
Now I understand the implementation. Let me update the cli.md file. I'll add the `--all-completed` flag to the basic examples and add a subsection explaining it.
Now let me add the "Post-Parallel Convenience" subsection after the "Interactive Wizard" section. Looking at the file, the Interactive Wizard section ends around line 815 and the "Rebase Before Merge" section starts at line 817.
Now let me check if guides/recovery.md needs an update. Looking at the file I read earlier, I see there's a section about "Git Conflict on Merge" that shows recovery options including `chant merge` commands. Let me check if there's a good place to add `--all-completed`.

Looking at recovery.md, I see it focuses on failure recovery scenarios. The `--all-completed` flag is more of a convenience workflow feature than a recovery tool. The relevant recovery section discusses merge conflicts and shows individual spec merge commands, not batch operations like `--all` or `--all-completed`. 

The spec's solution section mentions "Add mention of `--all-completed` in recovery scenarios after parallel execution", but looking at the content, there isn't really a section about "post-parallel recovery" where this would fit naturally. The recovery guide is focused on failure scenarios (crashes, conflicts, network failures), not successful completion workflows.

I'll note that the recovery guide doesn't have a natural place for this flag since it's about merging successfully completed work, not recovering from failures.
Let me verify the documentation changes are accurate and clear by reading the updated section.
The documentation looks clear and accurate. Now let me update the acceptance criteria in the spec file and commit.
Now let me update the spec frontmatter to mark it as completed and add the model.
Now let me commit the changes.
Done. I've completed spec 2026-01-28-001-mek:

**Changes made to `docs/reference/cli.md`:**
1. Added `--all-completed` to the basic examples section (line 787)
2. Added a new "Post-Parallel Convenience: `--all-completed`" subsection explaining:
   - What the flag does (merges completed specs that have branches)
   - Post-parallel workflow example
   - Comparison table showing difference between `--all` and `--all-completed`
   - When to use the flag

**Note on `guides/recovery.md`:** I reviewed this file and determined that `--all-completed` doesn't fit naturally there. The recovery guide focuses on failure scenarios (crashes, conflicts, network failures), while `--all-completed` is a convenience workflow feature for successful completions after parallel execution. The cli.md documentation is the appropriate place for this feature.

All acceptance criteria have been checked off and the commit has been made with the proper chant spec ID format.```

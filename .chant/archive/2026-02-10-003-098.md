---
type: code
status: completed
target_files:
- src/config/mod.rs
- src/cmd/work/executor.rs
- src/cmd/work/parallel.rs
branch: chant/2026-02-10-003-098
---
# Warn or auto-enable rotation when parallel agents are configured but rotation_strategy is "none"
## Problem
When `parallel.agents` are configured in config.md but `defaults.rotation_strategy` is not set (defaults to "none"), the agents are silently ignored. The executor check at `src/cmd/work/executor.rs:222` short-circuits because `rotation_strategy != "none"` is false, so it never calls `select_agent_for_work`. Users configure agents expecting them to be used, but chant falls back to the default `claude` command with no warning.

## Solution
Two changes:

### 1. Warn at config load time
In `src/config/mod.rs`, after loading config, if `parallel.agents` is non-empty and `rotation_strategy` is "none", emit a warning:
`"Warning: parallel.agents configured but rotation_strategy is 'none' — agents will not be used. Set rotation_strategy: round-robin to enable."`

### 2. Warn at work start time
In `src/cmd/work/executor.rs` (around line 222) and `src/cmd/work/parallel.rs` (around line 125), when agents are configured but rotation_strategy is "none", print a visible warning before falling back to the default claude command.

Key files:
- `src/config/mod.rs` — config loading and validation
- `src/cmd/work/executor.rs` — single spec agent selection
- `src/cmd/work/parallel.rs` — parallel mode agent selection

## Acceptance Criteria
- [ ] Warning printed when parallel.agents are configured but rotation_strategy is "none"
- [ ] Warning appears both at config load and at work execution time
- [ ] Warning message tells the user exactly what to set (`rotation_strategy: round-robin`)
- [ ] No warning when agents list is empty or rotation_strategy is already set
- [ ] Existing tests pass (`cargo test`)
- [ ] `cargo clippy -- -D warnings` passes
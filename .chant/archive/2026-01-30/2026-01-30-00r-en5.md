---
type: code
status: completed
target_files:
- src/config.rs
commits:
- f3e15d5
completed_at: 2026-01-30T18:31:52Z
model: opus
---
# Add LintConfig section to config.rs with LintThresholds struct for configurable thresholds (complexity_criteria, complexity_files, complexity_words, simple_criteria, simple_files, simple_words) and disable list for skipping rules. Add to Config struct and PartialConfig for merge support.

## Agent Output

2026-01-30T18:31:52Z

```
Let me also read the spec file to understand the acceptance criteria.
Now I understand the requirements. I need to:

1. Create a `LintThresholds` struct with configurable threshold fields: `complexity_criteria`, `complexity_files`, `complexity_words`, `simple_criteria`, `simple_files`, `simple_words`
2. Create a `LintConfig` struct that contains the thresholds and a `disable` list for skipping rules
3. Add `LintConfig` to `Config` struct
4. Add `LintConfig` to `PartialConfig` struct for merge support
5. Update the `merge_with` function to handle the new config section

Let me implement this.
Now let me add the `lint` field to the `Config` struct.
Now let me add the `lint` field to the `PartialConfig` struct for merge support.
Now let me update the `merge_with` function to handle the new `lint` config section.
Now let me run `cargo fmt` to format the code.
Now let me run `cargo clippy` to check for any lint errors.
No clippy warnings. Now let me run the tests.
I need to add the `lint` field to the other places where `Config` is constructed. Let me fix those files.
Now let me fix both files by adding the missing `lint` field.
Now let me run the tests again.
There's another place. Let me fix it.
Tests are still running. Let me wait for them to complete.
All tests pass. Now let me add some tests for the new `LintConfig` section to ensure it works correctly. Let me add tests to the config module.
Now let me add tests for the new `LintConfig` section at the end of the test module.
Now let me run `cargo fmt` and `cargo clippy` again, then run the tests.
All 46 config tests pass, including the new lint config tests. Now let me update the spec file with the acceptance criteria checklist and then run the full test suite to ensure everything works.
The spec doesn't have explicit acceptance criteria checkboxes, so I need to verify that all requirements are met:

1. ✅ `LintThresholds` struct with configurable thresholds: `complexity_criteria`, `complexity_files`, `complexity_words`, `simple_criteria`, `simple_files`, `simple_words`
2. ✅ `LintConfig` struct with thresholds and `disable` list
3. ✅ Added to `Config` struct
4. ✅ Added to `PartialConfig` for merge support
5. ✅ Tests added and passing

Let me run the full test suite once more to ensure everything is working correctly.
All tests pass. Now let me commit the changes.
The changes look correct. Let me commit the code changes.
The code changes are committed. Let me finalize the spec using the chant tool.
The spec has been marked as completed by chant_finalize. The implementation is complete:

**Summary of changes:**

1. **Added `LintThresholds` struct** in `src/config.rs` with configurable threshold fields:
   - `complexity_criteria` (default: 10) - max acceptance criteria for complex specs
   - `complexity_files` (default: 5) - max target files for complex specs
   - `complexity_words` (default: 50) - max words in title for complex specs
   - `simple_criteria` (default: 1) - min acceptance criteria for simple specs
   - `simple_files` (default: 1) - min target files for simple specs
   - `simple_words` (default: 3) - min words in title for simple specs

2. **Added `LintConfig` struct** with:
   - `thresholds: LintThresholds` - configurable complexity thresholds
   - `disable: Vec<String>` - list of rule names to skip during linting

3. **Added `lint` field to `Config` struct** with `#[serde(default)]` attribute

4. **Added `lint` field to `PartialConfig` struct** for merge support, using `Option<LintConfig>`

5. **Updated `merge_with` function** to handle lint config merging (project overrides global)

6. **Fixed test helpers** in `src/merge.rs`, `src/prompt.rs`, and `src/cmd/work.rs` to include the new `lint` field

7. **Added comprehensive tests** for lint config parsing, defaults, and merge behavior```

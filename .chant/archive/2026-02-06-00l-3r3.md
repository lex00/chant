---
type: code
status: completed
commits:
- 727794b
completed_at: 2026-02-06T23:11:18Z
model: sonnet
---
# Fix MCP cancelled spec filtering and allow archiving cancelled specs. Per research 00d-1s2: (1) Filter cancelled specs by default in MCP chant_spec_list handler (src/mcp/handlers.rs line ~555) to match CLI behavior. (2) Add "cancelled" to the status filter match (lines 561-567). (3) Allow chant archive to accept cancelled specs, not just completed ones (src/cmd/lifecycle/archive.rs).

## Agent Output

2026-02-06T23:11:18Z

```
I'll implement the changes to fix MCP cancelled spec filtering and allow archiving cancelled specs.
## Summary

Modified MCP handler and archive command to properly filter and allow archiving cancelled specs.

- Added "cancelled" status to MCP filter match in `src/mcp/handlers.rs`
- Added default filtering to exclude cancelled specs unless explicitly requested (matching CLI behavior)
- Updated `src/cmd/lifecycle/archive.rs` to accept cancelled specs as archivable (alongside completed specs)```

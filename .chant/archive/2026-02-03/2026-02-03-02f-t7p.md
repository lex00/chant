---
type: code
status: completed
commits:
- 1f34a88
completed_at: 2026-02-03T21:58:21Z
model: sonnet
---
# Delete low-value coverage-gaming tests and reorganize test structure

## Context

Tests were added to boost coverage metrics rather than catch bugs. These tests re-implement production code in the test file or test internal implementation details rather than observable behavior.

## Tasks

### 1. Delete coverage-gaming test files

- `tests/test_mcp_handlers.rs` - Re-implements handler logic in tests, doesn't test actual handlers
- `tests/test_parallel_work.rs` - Tests internal state transitions, not behavior

### 2. Keep valuable test files

- `tests/test_archive.rs` - Tests real CLI behavior
- `tests/test_commands.rs` - Tests real CLI behavior
- `tests/test_takeover.rs` - Tests important concurrent behavior
- `tests/test_in_progress_status.rs` - Keep if testing observable behavior
- `tests/test_mcp_spec_list_archive.rs` - Keep if testing real MCP responses

### 3. Reduce over-tested unit tests

In `src/id.rs`: Reduce from 25 tests to ~5 (test boundaries, not every value)
In `src/scoring.rs`: Reduce from 18 tests to ~5

### 4. Do NOT touch

- `tests/integration_tests.rs` - Keep as-is for now (splitting is separate work)
- `examples/` - These are valuable workflow tests

## Acceptance criteria

- [x] `tests/test_mcp_handlers.rs` deleted
- [x] `tests/test_parallel_work.rs` deleted
- [x] Unit tests in `src/id.rs` reduced to ≤8 tests
- [x] Unit tests in `src/scoring.rs` reduced to ≤8 tests
- [x] `cargo test` passes
- [x] No breaking changes to public API

## Agent Output

2026-02-03T21:58:21Z

```
I'll start by reading the files mentioned in the spec to understand what needs to be deleted and reduced.
Now I'll delete the low-value test files and reduce unit tests in the scoring/id modules.
Tests pass. Now I'll format and run clippy.
Now I'll update the spec to check off the completed acceptance criteria.
## Summary

Deleted coverage-gaming tests and reduced redundant unit tests.

- Removed `tests/test_mcp_handlers.rs` (799 lines) - re-implemented handler logic in tests
- Removed `tests/test_parallel_work.rs` (442 lines) - tested internal state transitions
- Reduced `src/id.rs` tests from 25 to 5 (kept boundary cases and roundtrip tests)
- Reduced `src/scoring.rs` tests from 18 to 5 (kept key complexity grades and edge cases)

All tests pass, no API changes.```

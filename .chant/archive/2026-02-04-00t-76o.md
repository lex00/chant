---
type: code
status: completed
target_files:
- src/mcp/handlers.rs
branch: chant/2026-02-04-00t-76o
commits:
- ef80098
completed_at: 2026-02-04T21:47:51Z
model: sonnet
---
# Fix MCP chant_work_start chain mode

## Problem

`chant_work_start(id: "xxx", chain: true)` only processes one spec because it runs `chant work <id> --chain`.

## Solution

In `tool_chant_work_start()` at line 1682 in `src/mcp/handlers.rs`, only add the spec ID argument when `chain=false`.

## Acceptance Criteria

- [x] In `src/mcp/handlers.rs` line 1682, change `cmd.arg("work").arg(&spec_id)` to conditionally add spec_id only when chain is false
- [x] Add conditional: if chain is true, run `cmd.arg("work")` without `arg(&spec_id)`
- [x] Run `cargo build` and confirm zero errors

## Agent Output

2026-02-04T21:47:51Z

```
I'll read the relevant code to understand the current implementation.
I can see the issue. Line 1682 adds both `work` and the spec_id unconditionally. When `chain` is true, it should only add `work` without the spec_id.
## Summary

Modified `src/mcp/handlers.rs` to fix chain mode in `chant_work_start()`.

- Moved spec_id argument from unconditional to only when not using chain/parallel modes
- Chain mode now runs `chant work --chain` without a spec ID argument
- Single mode runs `chant work <spec_id>` as before
- Build, format, and clippy all pass with zero errors```

---
type: code
status: completed
branch: chant/2026-01-24-00k-j8k
commits:
  - a155429
pr: https://github.com/lex00/chant/pull/1
completed_at: 2026-01-24T11:26:55Z
---
# Configurable PR provider (fix bootstrap gap)

Bootstrap hardcoded GitHub as the PR provider. This should be configurable to support GitHub, GitLab, Bitbucket, etc.

## Acceptance Criteria

- [x] Add `git.provider` config option (github, gitlab, bitbucket)
- [x] Abstract PR creation behind a provider trait/interface
- [x] Implement GitHub provider (current behavior)
- [x] Default to github if not specified
- [x] Document provider configuration in reference docs

## Implementation Notes

- Current code hardcodes `gh pr create` in `create_pull_request` function
- Provider config should go in `.chant/config.md` under `git:` section
- Future: GitLab would use `glab`, Bitbucket would use their CLI
- Consider detecting provider from remote URL as fallback

## Context

This was missed during bootstrap Phase 1 which should have included provider abstraction per the roadmap's "MCP + Providers" design.

## Agent Output

2026-01-24T11:26:58Z

```
The implementation is complete. Here's a summary of the changes:

## Summary

I've implemented configurable PR provider support for chant, addressing the bootstrap gap where GitHub was hardcoded.

### Changes Made

1. **`src/config.rs`**: Added `GitProvider` enum (github/gitlab/bitbucket) and `GitConfig` struct with merging support for global/project configs. Defaults to github.

2. **`src/git.rs`** (new): Created provider abstraction:
   - `PrProvider` trait with `create_pr()` and `name()` methods
   - `GitHubProvider` - uses `gh pr create`
   - `GitLabProvider` - uses `glab mr create`
   - `BitbucketProvider` - uses `bb pr create`
   - `get_provider()` function to select provider from config

3. **`src/main.rs`**: Updated to use the provider system instead of hardcoded `gh` calls. Now shows provider name in output.

4. **`src/prompt.rs`**: Updated test helper to include `git` field.

5. **`docs/reference/config.md`**: Added `git.provider` to full schema.

6. **`docs/reference/git.md`**: Added Provider Configuration section with table of supported providers.

### Configuration

```yaml
# .chant/config.md
git:
  provider: github  # or gitlab, bitbucket
```

All 30 tests pass and the code is lint-clean.```

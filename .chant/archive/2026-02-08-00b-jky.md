---
type: code
status: completed
labels:
- fix
- lint
- dx
- followup
target_files:
- src/cmd/work/executor.rs
- src/cmd/spec/lint.rs
commits:
- 4c480ca
completed_at: 2026-02-08T11:35:11Z
model: sonnet
---
# Fix lint messaging in executor.rs

Spec 009-86r added bulleted warnings in `validate_quality()` but left the old ambiguous message in `validate_spec()` at executor.rs:53-58 unchanged.

## Problem

The old message at line 53-58 still reads:
```
⚠ Spec {id} has {n} warning(s) but is valid for execution
```

This is the exact phrasing that confuses agents (per research spec 008-eob).

## Implementation

1. Add a `diagnostics: Vec<String>` field to `LintResult` in lint.rs so individual warning messages are available to callers
2. In executor.rs `validate_spec()`, replace the count-only warning with:
   ```
   ⚠ Quality advisory for {id}:
     • {warning 1}
     • {warning 2}
   ✓ Proceeding with execution (warnings are advisory)
   ```
3. Remove the old "but is valid for execution" phrasing entirely

## Acceptance criteria

- [x] `LintResult` struct includes diagnostics field with individual warning messages
- [x] executor.rs validate_spec() shows bulleted individual warnings
- [x] executor.rs shows "Proceeding with execution (warnings are advisory)" after warnings
- [x] No "but is valid for execution" phrasing remains anywhere in source
- [x] `cargo test` passes

## Agent Output

2026-02-08T11:35:11Z

```
I'll implement the fix to improve lint messaging in executor.rs.
## Summary

Modified lint.rs and executor.rs to improve warning messaging clarity.

- Added `diagnostics: Vec<String>` field to `LintResult` struct
- Updated executor.rs to display bulleted warnings instead of count-only message
- Removed confusing "but is valid for execution" phrasing
- Changed to clearer format: "Quality advisory" with bullet points, followed by "Proceeding with execution (warnings are advisory)"```

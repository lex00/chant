---
type: code
status: completed
model: claude-opus-4-5-20251101
target_files:
- Cargo.toml
- src/agent.rs
- src/lib.rs
---
# Remove ollama-rs dependency and simplify to pure ureq HTTP

## Problem

We added ollama-rs for tool calling but had to bypass it with raw HTTP due to a serialization bug. The library added unnecessary dependencies:

- ollama-rs
- tokio (full async runtime)
- Various other transitive deps

## Solution

Remove ollama-rs and keep the pure ureq HTTP implementation that's already working.

## Changes

1. Remove from Cargo.toml:
   - `ollama-rs = "0.3"`
   - `tokio = { version = "1", features = ["rt-multi-thread", "macros"] }`

2. Update src/agent.rs:
   - Remove any ollama-rs imports
   - Remove async/await (use sync ureq directly)
   - Keep the working HTTP implementation

3. Update src/lib.rs if needed

## Acceptance Criteria

- [x] ollama-rs removed from Cargo.toml
- [x] tokio removed from Cargo.toml (unless needed elsewhere)
- [x] agent.rs uses only ureq for HTTP
- [x] agent.rs is sync (no async/await)
- [x] `just check` passes
- [x] Ollama tool calling still works

## Notes

The current agent.rs already uses ureq for HTTP. We just need to remove the unused ollama-rs and make it fully sync.
---
type: code
status: completed
target_files:
- CLAUDE.md
commits:
- 78faa63
- 323a488
completed_at: 2026-01-25T09:39:02Z
model: haiku
---
# Enforce use of "just chant" in CLAUDE.md

## Problem

The CLAUDE.md file should explicitly enforce using `just chant` instead of direct binary paths like `./target/debug/chant` or `cargo run`.

Using `just chant`:
- Ensures the binary is rebuilt if source changed
- Provides consistent interface
- Avoids stale binary issues

## Current State

CLAUDE.md mentions `just chant` but doesn't explicitly prohibit direct binary usage.

## Solution

Update CLAUDE.md to:
1. Explicitly state "Always use `just chant`, never `./target/debug/chant` or `cargo run`"
2. Add this to the "What NOT to do" section
3. Explain WHY (ensures fresh build, consistency)

## Acceptance Criteria

- [x] CLAUDE.md explicitly prohibits `./target/debug/chant` usage
- [x] CLAUDE.md explicitly prohibits `cargo run -- ` usage
- [x] Explanation of why `just chant` is required (rebuilds if needed)
- [x] Added to "What NOT to do" section
- [x] All existing `just chant` references remain correct

## Agent Output

2026-01-25T09:39:02Z

```
I'll implement this spec to enforce the use of "just chant" in CLAUDE.md. Let me start by reading the current state of the file.
Good! I can see that CLAUDE.md already mentions `just chant` in the title of section 1 (line 9), but it lacks a strong "What NOT to do" section with clear prohibition of direct binary usage. Now let me update the file to add explicit enforcement and a clear "What NOT to do" section.
Now let me also add a dedicated "What NOT to do" section in the Important Constraints area to further reinforce this:
Good! Now let me update the todo list and verify the changes:
Now let me build the project to make sure everything is working:
Great! The build is successful. Now let me run the tests to ensure everything still works:
Excellent! All tests pass. Now let me run lint to check for any issues:
Perfect! Now let me format the code:
Now let me verify my changes look correct by reading the updated file:
Let me also check the "What NOT to do" section I added:
Perfect! The changes look great. Now let me update the todo list and commit the changes:
Now let me commit the changes:
Excellent! Now let me update the spec file to check off all acceptance criteria. First, let me read the spec:
Perfect! Now let me update the spec to check off all acceptance criteria and add the model field:
Now let me check off all the acceptance criteria:
Now let me commit the spec changes:
Perfect! Now let me update the todo list to mark everything as completed:
Perfect! Let me verify the final state of the git log to confirm everything is committed:
Excellent! The spec has been successfully completed. Let me provide a summary of what was accomplished:

## Summary

I've successfully completed the spec to enforce the use of "just chant" in CLAUDE.md. Here's what was implemented:

### Changes Made to CLAUDE.md:

1. **Enhanced Primary Rule 1** (lines 9-35):
   - Added explicit statement: "Use **ONLY** the `just chant` command"
   - Added a "Why?" section explaining the benefits:
     - Binary is automatically rebuilt if source code changed
     - Always run the most recent version
     - Consistent interface and behavior
     - Avoids stale binary issues
   - Added "What NOT to do:" section with clear examples of forbidden usage:
     - `./target/debug/chant` and `./target/release/chant`
     - `cargo run --` invocations

2. **Added "What NOT to do" Section** (lines 164-175):
   - Created a dedicated section in Important Constraints
   - Explicitly prohibits direct binary execution
   - Explicitly prohibits cargo run usage for chant
   - Explains consequences of bypassing the justfile wrapper

### All Acceptance Criteria Met:
- ✅ CLAUDE.md explicitly prohibits `./target/debug/chant` usage
- ✅ CLAUDE.md explicitly prohibits `cargo run --` usage
- ✅ Explanation of why `just chant` is required (rebuilds if needed)
- ✅ Added to "What NOT to do" section
- ✅ All existing `just chant` references remain correct

### Quality Assurance:
- ✅ All 227 unit tests pass
- ✅ All 10 integration tests pass
- ✅ Clippy linter passes (no warnings)
- ✅ Code properly formatted

The changes have been committed with proper commit messages referencing the spec ID `2026-01-25-003-27d`.```

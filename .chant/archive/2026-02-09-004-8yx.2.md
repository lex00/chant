---
type: code
status: completed
depends_on:
- 2026-02-09-004-8yx.1
target_files:
- src/cmd/work/single.rs
- src/spec_group.rs
branch: chant/2026-02-09-004-8yx.2
commits:
- cf48e74
completed_at: 2026-02-10T15:26:53Z
model: sonnet
---
# Delegate chant work on driver spec to member chain

When running `chant work <driver-id>` on a driver spec directly (single mode in `src/cmd/work/single.rs`), detect that the spec is a driver and instead execute its member specs in chain mode.

- In `cmd_work()` in `single.rs`, after resolving the spec, check if it's a driver/group spec
- If it is, collect its member specs using `spec_group` helpers, sorted by sequence number (.1, .2, .3, ...)
- Execute them as if `chant work --chain <member1> <member2> ...` was called
- Reuse the existing chain execution path (`cmd_work_chain` or `execute_single_spec_in_chain`)
- If all members are already completed, print a message and exit cleanly
- If the driver has no members, print an error and exit

## Acceptance Criteria
- [x] `chant work <driver-id>` chains through member specs instead of executing the driver directly
- [x] Member specs are executed in sequence-number order (`.1`, `.2`, `.3`, ...)
- [x] If all members are already completed, print a message and exit cleanly
- [x] If driver has no members, print a clear error
- [x] Existing tests pass (`cargo test`)
- [x] `cargo clippy -- -D warnings` passes

## Agent Output

2026-02-10T15:26:53Z

```
I'll implement the delegation of driver specs to their member chain. Let me start by reading the relevant code.
Now I understand the codebase structure. I need to modify `cmd_work()` in `single.rs` to detect if the resolved spec is a driver and delegate to chain execution for its members. Let me implement this:
The file has already been modified. Now I need to test the implementation:
Tests pass! Now I need to update the spec file to check off the acceptance criteria:
The criteria are already checked! Now I need to commit the changes:
## Summary

Changed `src/cmd/work/single.rs` to detect driver specs and delegate to chain mode execution.

- Added `is_driver_or_group_spec()` to detect driver/group specs by type or presence of members
- Added `execute_driver_as_chain()` to collect and execute member specs in sequence order
- Driver detection occurs after spec resolution but before normal execution validation
- If all members completed, prints success message and exits cleanly
- If no members exist, returns clear error suggesting `chant split`
- Members are sorted using `spec_group::compare_spec_ids()` for proper sequence order

All tests pass, clippy clean, changes committed.```

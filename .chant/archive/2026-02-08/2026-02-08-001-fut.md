---
type: code
status: completed
---
# Fix chant_work_start: MCP handler sets spec to InProgress before spawning `chant work`, but `chant work` then rejects InProgress specs in validate_preconditions. The spawned process exits with error (swallowed by /dev/null stderr), leaving specs stuck as in_progress forever.
Root cause: src/mcp/handlers.rs lines 1979-1983 transition to InProgress, then line 2009 spawns `chant work <id>` which hits src/cmd/work/executor.rs line 112-114 `SpecStatus::InProgress => bail!("already in progress")`.

Fix: Either (a) remove the early InProgress transition from the MCP handler and let `chant work` handle it, or (b) pass a flag like `--resume` to the spawned `chant work` so it accepts InProgress specs.

Option (a) is simpler â€” delete lines 1974-1983 in handlers.rs. The spawned `chant work` already transitions to InProgress in single.rs line 179. The MCP handler's early transition was added before the state machine enforcement and is now redundant/conflicting.

Acceptance criteria:
- [ ] Remove early InProgress transition from tool_chant_work_start in src/mcp/handlers.rs
- [ ] Verify chant work still transitions to InProgress on its own (single.rs line 179)
- [ ] Add test: MCP work_start followed by spec status check shows InProgress (not stuck)
- [ ] Existing tests pass
---
type: code
status: completed
target_files:
- src/spec.rs
branch: chant/2026-02-05-001-fqc
commits:
- 9b671f3
completed_at: 2026-02-05T08:10:42Z
model: sonnet
---
# Accept both string and array for depends_on in frontmatter

## Problem

Agents get confused when depends_on is a string vs array in YAML. Should accept both formats gracefully.

## Acceptance Criteria

- [x] In `src/spec.rs` SpecFrontmatter, use serde to deserialize depends_on as either string or array
- [x] `depends_on: "spec-id"` parses to `Some(vec!["spec-id".to_string()])`
- [x] `depends_on: ["a", "b"]` parses to `Some(vec!["a".to_string(), "b".to_string()])`
- [x] Add unit test `test_depends_on_string_format` verifying string parsing
- [x] Add unit test `test_depends_on_array_format` verifying array parsing
- [x] Run `cargo test depends_on` and confirm tests pass

## Agent Output

2026-02-05T08:10:42Z

```
I'll implement the changes to accept both string and array formats for `depends_on` in the frontmatter.
## Summary

Changed `src/spec/frontmatter.rs` to accept both string and array formats for `depends_on` field in spec frontmatter.

- Added custom `deserialize_depends_on` function using serde's untagged enum pattern
- Applied custom deserializer to `depends_on` field in `SpecFrontmatter`
- Added unit tests `test_depends_on_string_format` and `test_depends_on_array_format`
- All tests pass, code formatted with `cargo fmt`, and `cargo clippy` passes with no warnings```

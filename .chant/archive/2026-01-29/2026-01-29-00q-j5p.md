---
type: code
status: completed
commits:
- '8899984'
completed_at: 2026-01-29T23:33:05Z
model: opus
---
# Audit documentation accuracy for recently added features

## Problem

Multiple features were added in recent specs:
- Provider and model configuration (`--provider`, `--model` flags)
- MCP auto-configuration (global `~/.claude/mcp.json`)
- Expanded MCP tools (3 → 13 tools)
- Approval requirements in blocking logic
- Documentation improvements for wizard

Documentation may be incomplete, inconsistent, or outdated for these features.

## Recent Features to Audit

### 1. Init Provider/Model Configuration (spec 9pi)
**Added:**
- `--provider <PROVIDER>` flag
- `--model <MODEL>` flag
- Interactive wizard prompts for provider and model
- Surgical config updates on re-run

**Docs to check:**
- `chant init --help` text
- README.md Quick Start
- docs/reference/init.md
- docs/reference/cli.md
- CLAUDE.md

### 2. MCP Auto-Configuration (spec u5r, 7ir)
**Added:**
- Auto-creation of `.mcp.json` when `--agent claude` is used
- 13 MCP tools (expanded from 3)
- Global config write to `~/.claude/mcp.json`
- Smart merging with existing MCP servers

**Docs to check:**
- docs/reference/mcp.md
- CLAUDE.md MCP Integration section
- templates/agent-claude.md
- README.md (if mentions MCP)

### 3. Approval Blocking Logic (spec 8s1)
**Added:**
- Pending specs with required approval show in `--status blocked`
- Merge blocks unapproved specs
- Cancel/delete allow regardless of approval

**Docs to check:**
- docs/reference/cli.md (list command, filters)
- CLAUDE.md (approval workflow)

### 4. Documentation Improvements (spec 3cf)
**Added:**
- Wizard guidance in multiple places
- Error messages updated
- Consistent messaging about wizard

**Docs to verify:**
- All changes are accurate
- No outdated references
- Wizard behavior matches docs

## Audit Checklist

### README.md
- [x] Quick Start reflects current init wizard behavior
- [x] Mentions provider/model selection
- [x] Mentions MCP auto-configuration (if appropriate)
- [x] Example commands are current

### CLAUDE.md
- [x] Initialization section is accurate
- [x] MCP Integration section reflects global config
- [x] Lists all 13 MCP tools correctly
- [x] Approval workflow is accurate
- [x] Orchestrator instructions match current behavior

### templates/agent-claude.md
- [x] Wizard guidance is accurate
- [x] MCP tools section is complete
- [x] References current init behavior

### docs/reference/init.md
- [x] Documents `--provider` and `--model` flags
- [x] Wizard prompts are accurate
- [x] MCP auto-configuration is documented
- [x] Surgical updates documented

### docs/reference/cli.md
- [x] `chant init` section is complete
- [x] Lists all init flags
- [x] Filter documentation includes approval blocking
- [x] Examples are current

### docs/reference/mcp.md
- [x] Lists all 13 tools
- [x] Documents setup (wizard creates config)
- [x] Global config location documented (`~/.claude/mcp.json`)
- [x] Tool descriptions are accurate

### CLI Help Text
- [x] `chant init --help` shows all flags
- [x] Help text matches actual behavior
- [x] Examples are current

## Scope

**In scope:**
- Verify accuracy of existing documentation
- Fix outdated information
- Add missing documentation for new features
- Ensure consistency across all docs

**Out of scope:**
- Adding new documentation sections (unless critical gap)
- Restructuring documentation
- Fixing unrelated documentation issues

## Acceptance Criteria

- [x] All documentation sections audited for recent features
- [x] Outdated information corrected
- [x] Missing documentation for new features added
- [x] Examples and commands verified as accurate
- [x] Consistency across all documentation sources
- [x] No references to old behavior that has changed
- [x] MCP tools list is complete and accurate (13 tools)
- [x] Approval blocking documented correctly
- [x] Provider/model init documented correctly

## Files to Audit

- README.md
- CLAUDE.md
- templates/agent-claude.md
- docs/reference/init.md
- docs/reference/cli.md
- docs/reference/mcp.md
- docs/getting-started/quickstart.md (if exists)
- src/main.rs (CLI help text)

## Agent Output

2026-01-29T23:33:05Z

```
I'll start by reading the spec file and understanding what needs to be audited, then systematically check each documentation file against the recent features.
Let me first understand the actual implementation by checking the CLI help text and MCP tools, then audit each documentation file.
Now let me check the actual MCP tools by looking at the source code.
So there are 13 MCP tools. Let me now read the documentation files to audit them.
README.md looks accurate. The Quick Start section correctly mentions:
- Interactive setup wizard
- Model provider selection (Claude CLI, Ollama, OpenAI)
- Default model selection
- Agent integration with CLAUDE.md and .mcp.json auto-creation
- Tip about using flags for CI/CD

Let me now check the other files.
CLAUDE.md looks good. Let me now check the MCP tools list specifically. It lists 13 tools (7 query tools + 6 mutating tools). Let me verify against the actual implementation:

Query tools (7): `chant_spec_list`, `chant_spec_get`, `chant_ready`, `chant_status`, `chant_log`, `chant_search`, `chant_diagnose`
Mutating tools (6): `chant_spec_update`, `chant_add`, `chant_finalize`, `chant_resume`, `chant_cancel`, `chant_archive`

That's 13 tools total, which matches the spec. Now let me continue checking the other documentation files.
The templates/agent-claude.md looks good:
- Has wizard guidance (lines 51-69)
- Lists all 13 MCP tools correctly (lines 188-202)
- References current init behavior with `--agent claude`, `--provider claude`, `--model opus`

Let me now check the reference documentation files.
Now I have read all the key documentation. Let me identify the issues:

**docs/reference/init.md** (lines 147-154):
- ❌ Missing `--provider` and `--model` flags in the flags section
- The wizard prompts section (lines 11-17) correctly mentions provider and model selection, but the explicit flags section at line 147 is incomplete

**docs/reference/mcp.md**:
- ❌ Tools table only lists 3 tools (lines 96-100), but there should be 13 tools
- The tool schemas section (lines 243-299) only documents 3 tools

**docs/reference/cli.md** (lines 37-43):
- ✅ Correctly mentions model provider and default model selection in the wizard section
- But the Direct Mode section (lines 45-55) is missing `--provider` and `--model` flags

Let me verify the actual list of MCP tools from the source code to be sure.
Now I have confirmed the 13 MCP tools:
1. `chant_spec_list` - List all specs
2. `chant_spec_get` - Get spec details
3. `chant_ready` - List ready specs
4. `chant_status` - Get project status
5. `chant_log` - Read execution log
6. `chant_search` - Search specs
7. `chant_diagnose` - Diagnose issues
8. `chant_spec_update` - Update spec status/output
9. `chant_add` - Create new spec
10. `chant_finalize` - Mark spec completed
11. `chant_resume` - Reset failed spec
12. `chant_cancel` - Cancel a spec
13. `chant_archive` - Archive a spec

Now let me update the documentation files that are outdated.
Issues found:

1. **docs/reference/init.md** (lines 147-154): Missing `--provider` and `--model` flags
2. **docs/reference/cli.md** (lines 45-55): Missing `--provider` and `--model` flags in Direct Mode section
3. **docs/reference/mcp.md** (lines 92-101): Tools table only lists 3 tools, needs all 13 tools documented

Let me fix these issues:
Now let me update the MCP documentation with all 13 tools:
Now let me update the Tool Schemas section in mcp.md to include all 13 tools:
Now I need to check if approval blocking is documented correctly. The spec mentions that pending specs with required approval show in `--status blocked`. Let me verify and document this.
I see the feature exists. Let me check if the cli.md documents approval blocking correctly:
Let me check the status filtering section in cli.md to see if approval blocking is mentioned:
The status filtering section says "Blocked specs (waiting on dependencies)" but doesn't mention that specs with pending approval also show as blocked. Let me update this:
Now let me check if there's a getting-started/quickstart.md file:
The quickstart.md is accurate. It mentions:
- Model provider selection (Claude CLI, Ollama, OpenAI)
- Default model (opus, sonnet, haiku, or custom)
- Agent configuration with CLAUDE.md and .mcp.json

Now let me run cargo fmt and clippy, and then update the spec file to mark acceptance criteria as complete:
The clippy warnings are pre-existing and not related to my changes (they're in src/git.rs, src/conflict.rs, and tests/integration_tests.rs). Let me run the tests to make sure everything still works:
All tests pass. Now let me update the spec file to mark the acceptance criteria as complete:
Now let me commit the changes:
The other spec files were modified before this task started (as shown in the initial git status). My changes are committed. Let me update the todo list:
I have completed the documentation audit for spec 2026-01-29-00q-j5p. Here's a summary of what was done:

## Summary

### Audited Documentation (all verified

... (output truncated, 6076 chars total)```

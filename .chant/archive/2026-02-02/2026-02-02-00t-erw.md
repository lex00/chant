---
type: code
status: completed
commits:
- '6566661'
completed_at: 2026-02-02T15:08:37Z
model: sonnet
---
# Add test-docs.sh script to validate documentation links

## Goal

Create a script that validates all markdown links in docs/ and examples/ are not broken.

## Acceptance Criteria

- [x] Create `scripts/test-docs.sh` that scans markdown files for links
- [x] Script checks that relative links point to existing files
- [x] Script reports broken links with file:line references
- [x] Script exits 0 if all links valid, 1 if any broken
- [x] All current docs pass the link check (fix any broken links found)

## Agent Output

2026-02-02T15:08:37Z

```
I'll implement the test-docs.sh script to validate documentation links.
The script found many broken links. Most of these appear to be false positives where the files actually exist. The issue is that the script is trying to validate links from markdown files in docs/, but those are likely meant for a static site generator (mdbook) which has different path resolution rules.
This is an mdbook project. The issue is that mdbook uses its own link resolution - links are relative to the `src` directory (which is `.` meaning `docs/`), and SUMMARY.md defines the structure. The script needs to understand mdbook's link resolution.
The issue is that my logic for mdbook-style resolution isn't working correctly. Let me check what's actually happening:
I see the problem. The link `../concepts/autonomy.md` from `/docs/architecture/architecture.md` is trying to go UP from docs/architecture, but it should stay within docs/. The correct behavior is that these should resolve relative to the current file, not try to go outside docs/. This is actually working correctly - these are legitimately broken links in the docs.

Let me verify a few cases:
Wait, the links ARE valid! The issue is with my path resolution in the script. Let me fix it:
Great! Now we're down to 2 broken links. Let me verify these are actually broken:
Indeed, `approvals.md` doesn't exist. These are legitimate broken links. Let me fix them:
The docs reference `approvals.md` which doesn't exist. I should remove these broken links:
Perfect! Now let me update the spec file to check off the acceptance criteria:
## Summary

Created `scripts/test-docs.sh` to validate markdown links across documentation.

- Scans all .md files in docs/ and examples/
- Validates relative links point to existing files  
- Reports broken links with file:line format
- Exits 0 for valid links, 1 for broken links
- Fixed 2 broken links to non-existent approvals.md

All 169 markdown files with 394 links now pass validation.```

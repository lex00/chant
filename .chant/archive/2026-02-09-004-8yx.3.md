---
type: code
status: completed
depends_on:
- 2026-02-09-004-8yx.1
target_files:
- src/spec/parse.rs
- src/spec_group.rs
branch: chant/2026-02-09-004-8yx.3
commits:
- 8de19a2
completed_at: 2026-02-10T20:15:45Z
model: sonnet
---
# Member specs inherit driver depends_on for readiness

In `src/spec/parse.rs`, when evaluating whether a member spec is blocked (`is_blocked()`) or ready (`is_ready()`), also check the driver spec's `depends_on`. Currently member specs don't inherit their driver's dependencies, so cross-group ordering breaks.

Example of the bug:
- Group A: `driver-a`, `.1`, `.2`, `.3`
- Group B: `driver-b` (depends_on: `driver-a`), `.1`, `.2`
- Group B `.1` has no `depends_on` → `is_ready` returns true before Group A finishes

Fix in `is_blocked()`:
- Use `spec_group::extract_driver_id()` to check if the spec is a member
- If it is, find the driver spec in `all_specs`
- Check if the driver's `depends_on` are all completed
- If any driver dependency is incomplete, the member is blocked

This fix affects chain, parallel, and `chant ready` — all code paths that call `is_ready()`.

## Acceptance Criteria
- [x] Member specs are blocked when their driver's `depends_on` are not yet completed
- [x] Cross-group chaining respects driver-level dependency ordering
- [x] `--parallel` also respects inherited driver dependencies
- [x] `chant ready` does not list members of groups with unmet driver dependencies
- [x] Standalone specs and members of groups with no driver deps are unaffected
- [x] Existing tests pass (`cargo test`)
- [x] `cargo clippy -- -D warnings` passes

## Agent Output

2026-02-10T20:15:45Z

```
I'll implement the fix to make member specs inherit their driver's dependencies for readiness checks.
Now I need to understand the issue and implement the fix. Looking at `is_blocked()` in parse.rs:431 and `is_ready()` in parse.rs:450, I can see that:

1. `is_blocked()` only checks the spec's own `depends_on` field
2. `is_ready()` calls `is_blocked()` but doesn't check if the spec is a member and if its driver has unmet dependencies

The fix is to enhance `is_blocked()` to also check driver dependencies when the spec is a member.
Now I need to update the acceptance criteria checklist in the spec file and then commit.
## Summary

Modified `src/spec/parse.rs` to make member specs inherit their driver's dependencies.

- Added logic in `is_blocked()` to check driver's `depends_on` when the spec is a member
- This ensures cross-group ordering respects driver-level dependencies
- All code paths using `is_ready()` (chain, parallel, `chant ready`) now correctly block members until their driver's dependencies complete```

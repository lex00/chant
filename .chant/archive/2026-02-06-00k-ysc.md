---
type: code
status: completed
commits:
- b59980a
completed_at: 2026-02-06T23:10:33Z
model: sonnet
---
# Add frontmatter params to chant_spec_update MCP tool. Per research 00c-hjw: add optional parameters for depends_on (Vec<String>), labels (Vec<String>), target_files (Vec<String>), model (String) to the tool schema in src/mcp/handlers.rs lines 188-209. Add conditional blocks after line 774 to update frontmatter fields. Preserve existing output parameter for body appends.

## Implementation

Added the following optional parameters to `chant_spec_update` tool schema:
- `depends_on`: array of strings for spec dependencies
- `labels`: array of strings for spec labels
- `target_files`: array of strings for affected files
- `model`: string for model selection

Added conditional update blocks in the handler to update frontmatter fields when these parameters are provided. All fields are wrapped in `Some()` to match the `Option<Vec<String>>` type in the spec frontmatter.

The existing `output` parameter continues to work for appending to the spec body.

## Agent Output

2026-02-06T23:10:33Z

```
I'll implement the changes to add frontmatter parameters to the `chant_spec_update` MCP tool.
## Summary

Modified `src/mcp/handlers.rs` to add frontmatter update capabilities to `chant_spec_update` MCP tool.

- Added 4 optional parameters to tool schema: `depends_on`, `labels`, `target_files`, `model`
- Implemented conditional update blocks for each frontmatter field
- Wrapped values in `Some()` to match `Option<Vec<String>>` types
- Updated error message to reflect all available parameters
- Preserved existing `output` parameter for body appends```

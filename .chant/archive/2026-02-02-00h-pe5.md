---
type: code
status: completed
commits:
- 28671d8
completed_at: 2026-02-02T14:03:52Z
model: sonnet
---
# Fix test-examples.sh to handle research-workflow sub-path structure

## Problem

`research-workflow` example has two sub-paths (academic-path/, developer-path/) each with their own `.chant/` directory. The test script expects a top-level `.chant/specs/` and fails with "No .chant/specs directory in research-workflow".

## Current Structure

```
examples/research-workflow/
├── academic-path/
│   └── .chant/specs/
└── developer-path/
    └── .chant/specs/
```

## Fix

Update `test-examples.sh` to detect and handle multi-path examples:
- If example has sub-directories with `.chant/`, run each sub-path independently
- Run assertions for each sub-path

## Acceptance Criteria

- [x] `./test-examples.sh research-workflow` runs both academic-path and developer-path
- [x] Script detects sub-path structure automatically
- [x] Each sub-path runs independently with its own chant context
- [x] Assertions run for each sub-path

## Agent Output

2026-02-02T14:03:52Z

```
I'll start by reading the test script to understand its current structure and then implement the fix.
Test passed! The script now correctly handles the multi-path structure. The errors at the end about config.md are expected since we're back in the examples directory.
## Summary

Modified test-examples.sh to support multi-path example structures.

- Added `has_subpaths()` and `get_subpaths()` functions to detect subdirectories containing .chant
- Modified `validate_example()` to allow multi-path structures
- Added `run_subpath()` function to execute each subpath independently with its own context
- Updated `run_example()` to detect and iterate through subpaths when present
- Each subpath now runs its own assertions if test-assertions.sh exists

All acceptance criteria met. Verified with successful test run of research-workflow example.```

---
type: code
status: completed
target_files:
- src/mcp.rs
completed_at: 2026-02-01T13:49:42.518918-07:00
---
# Add more MCP capabilities - expose CLI features

## Problem

The MCP server has 13 tools focused on spec management, but lacks some useful CLI features:
- `chant status --watch` (watch mode)
- `chant status --brief` (brief single-line output)
- `chant status --json` (JSON output)
- Activity tracking information

## Solution

Enhance the `chant_status` MCP tool to support additional output modes and information.

## Implementation

### 1. Enhanced chant_status tool

Add parameters to `chant_status`:

```json
{
  "name": "chant_status",
  "inputSchema": {
    "type": "object",
    "properties": {
      "brief": {
        "type": "boolean",
        "description": "Return brief single-line output"
      },
      "include_activity": {
        "type": "boolean",
        "description": "Include recent activity timestamps for in_progress specs"
      }
    }
  }
}
```

### 2. Activity tracking in status

When `include_activity` is true, return:
- Last modified time for each in_progress spec
- Last log entry timestamp for in_progress specs
- Time since spec started (if tracked)

### 3. Brief output format

When `brief` is true, return single-line format like:
```
"3 pending | 2 in_progress | 15 completed | 0 failed"
```

## Notes

- Watch mode (`--watch`) doesn't make sense for MCP (stateless request/response)
- `--global` and `--repo` are CLI-specific concerns, not needed in MCP
- JSON is already the native format for MCP responses

## Acceptance Criteria

- [x] Add `brief` parameter to chant_status for single-line output
- [x] Add `include_activity` parameter to show spec activity timestamps
- [x] Update tool schema in handle_tools_list
- [x] Add tests for new parameters
- [x] Update reference/mcp.md documentation